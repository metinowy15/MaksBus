(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	var module = __webpack_require__(id);
	return module;
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error('Cannot find module "' + req + '".');
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error('Cannot find module "' + req + '".');
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/app.component.css":
/*!***********************************!*\
  !*** ./src/app/app.component.css ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".spinner-center{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 80%!important;\r\n}\r\nbody{\r\nmargin-top: 35px!important;\r\n}\r\nhtml{\r\n    height: 100%!important;\r\n}\r\n.menu-bus-item button{\r\n    width: 33%;\r\n    font-family: 'Kalam'!important;\r\n}\r\n.menu-bus-item{\r\n    position: fixed;\r\n    top: 0px;\r\n    z-index: 1300;\r\n    height: 35px\r\n}\r\n.progressInfo{\r\n    text-align: center;\r\n    margin: 5px;\r\n    color:#e57373;\r\n}\r\n.example-container {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n  }\r\n.imgNav{\r\n      width: 250px;\r\n      font-size: 20px;\r\n  }\r\n.imgNav img{\r\n    max-width:100%;\r\n  }\r\n.imgNav p {\r\n      margin-top: 0px;\r\n      margin-bottom: 4px;\r\n  }\r\n.imgNav button{\r\n    width: 100%!important;\r\n    text-align: left!important;\r\n  }\r\n.odj button{\r\n    padding-left: 50px!important;\r\n    color: grey;\r\n    font-size: 14px!important;\r\n  }\r\n.activeLink{\r\n      color:#e57373;\r\n  }\r\n.imgNav i{\r\n    margin-right: 5px;\r\n  }\r\n.mat-button{\r\n      font-size:20px!important\r\n  }\r\n"

/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- <mat-toolbar color=\"primary\"> -->\r\n<!--\r\n    <button (click)=\"checkStart()\" mat-button>\r\n        <mat-icon>explore</mat-icon>\r\n       Start</button>\r\n    <button [routerLink]=\"['/courses']\" mat-button>\r\n        <i class=\"material-icons\">\r\n            directions_bus\r\n        </i>Kursy\r\n        </button>\r\n    <button [routerLink]=\"['/timetable']\" mat-button>\r\n     <i class=\"material-icons\">\r\n            format_list_bulleted\r\n        </i>Rozkład</button>\r\n\r\n</mat-toolbar>\r\n<div *ngIf=\"!locationIsDetected || !timetableIsActual\" class=\"spinner-center\">\r\n    <mat-spinner></mat-spinner>\r\n  \r\n</div>\r\n<div *ngIf=\"!locationIsDetected || !timetableIsActual\" class=\"progressInfo\">{{progressInfo}}</div>\r\n<div *ngIf=\"locationIsDetected && timetableIsActual\">\r\n</div> -->\r\n\r\n<mat-sidenav-container class=\"example-container\" (backdropClick)=\"close('backdrop')\">\r\n\r\n    <mat-sidenav class=\"imgNav\" #sidenav (keydown.escape)=\"close('escape')\" disableClose>\r\n        <img src=\"../assets/Limanowa.jpg\">\r\n\r\n        <p style=\"margin-top:-4px\"><button [ngClass]=\"{'activeLink': active=='Znajdź najbliższy'}\"  [routerLink]=\"['/start']\" (click)=\"activate('Znajdź najbliższy')\" mat-button>\r\n                <mat-icon>explore</mat-icon>\r\n                Znajdź najbliższy\r\n            </button></p>\r\n        <p>\r\n            <button mat-button [ngClass]=\"{'activeLink': active=='Rozkład'}\" [routerLink]=\"['/timetable']\" (click)=\"activate('Rozkład')\">\r\n                <i class=\"material-icons\">\r\n                    format_list_bulleted\r\n                </i>Rozkład</button></p>\r\n\r\n        <button style=\"color: black!important;\" [disabled]=\"true\" mat-button [ngClass]=\"{'activeLink': active.includes('Odjazdy')}\">\r\n            <i class=\"material-icons\">\r\n                directions_bus\r\n            </i> Odjazdy\r\n        </button>\r\n        <br>\r\n        <div class=\"odj\">\r\n            <button [routerLink]=\"['/courses', 'Krk']\" (click)=\"activate('Odjazdy w strone Limanowej')\" mat-button>\r\n                W strone Limanowej\r\n            </button>\r\n            <br>\r\n            <button [routerLink]=\"['/courses', 'Lim']\" (click)=\"activate('Odjazdy w strone Krakowa')\" mat-button>\r\n                W strone Krakowa\r\n            </button>\r\n        </div>\r\n        <p>\r\n        <!-- <button mat-button [ngClass]=\"{'activeLink': active=='Mapa busów'}\" [routerLink]=\"['/maps']\" (click)=\"activate('Mapa busów')\">\r\n                    <i class=\"material-icons\">\r\n                        map\r\n                    </i>Mapa busów</button></p> -->\r\n      <div style=\"position:absolute; bottom:10px;right:10px;color:#e57373;font-family: Roboto, 'Helvetica Neue', sans-serif;\">\r\n        v{{appVersion}}\r\n        </div>\r\n    </mat-sidenav>\r\n\r\n    <mat-sidenav-content>\r\n        <mat-toolbar style=\"height:40px\" color=\"primary\">\r\n            <button style=\"padding-left:0px;padding-right:0px;min-width: unset;margin-right: 10px;\" (click)=\"sidenav.open()\" mat-button>\r\n                <i  style=\"font-size: 36px;\" class=\"material-icons\">\r\n                    menu\r\n                </i></button><div style=\"width: 100%;text-align: left\">{{active}}</div>\r\n        </mat-toolbar>\r\n        <div *ngIf=\"!locationIsDetected || !timetableIsActual\" class=\"spinner-center\">\r\n            <mat-spinner></mat-spinner>\r\n          \r\n        </div>\r\n        <div *ngIf=\"!locationIsDetected || !timetableIsActual\" class=\"progressInfo\">{{progressInfo}}</div>\r\n        <div *ngIf=\"locationIsDetected && timetableIsActual\">\r\n            <router-outlet></router-outlet>\r\n        </div>\r\n    </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n"

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_NotificationService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./services/NotificationService */ "./src/app/services/NotificationService.ts");
/* harmony import */ var _services_TimetableUpdateService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/TimetableUpdateService */ "./src/app/services/TimetableUpdateService.ts");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events/TimetableUpdated */ "./src/app/events/TimetableUpdated.ts");
/* harmony import */ var _events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events/TimetableVersionChanged */ "./src/app/events/TimetableVersionChanged.ts");
/* harmony import */ var _events_LocationDetected__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./events/LocationDetected */ "./src/app/events/LocationDetected.ts");
/* harmony import */ var _services_LegendServices__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./services/LegendServices */ "./src/app/services/LegendServices.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _events_NoInternet__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./events/NoInternet */ "./src/app/events/NoInternet.ts");
/* harmony import */ var _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./events/AppVersionUpdated */ "./src/app/events/AppVersionUpdated.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./events/ProgressInfo */ "./src/app/events/ProgressInfo.ts");
/* harmony import */ var _angular_material_sidenav__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/sidenav */ "./node_modules/@angular/material/esm5/sidenav.es5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var AppComponent = /** @class */ (function () {
    function AppComponent(appState, snackBar, zone, router, notService, timetableService, locationService, legendService, eventService) {
        this.appState = appState;
        this.snackBar = snackBar;
        this.zone = zone;
        this.router = router;
        this.notService = notService;
        this.timetableService = timetableService;
        this.locationService = locationService;
        this.legendService = legendService;
        this.eventService = eventService;
        this.reason = '';
        this.progressInfo = "Uruchamianie aplikacji";
        this.calculatingDuration = false;
        this.timetableIsActual = false;
        this.locationIsDetected = false;
        this.locationState = "test";
        this.active = "Znajdź najbliższy";
        this.eventSubscriptionInit();
        var that = this;
        //  document.addEventListener('deviceready', () => {
        console.log("deviceIsReady");
        that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Uruchamianie aplikacji"));
        that.notService.updateNotification();
        //});
        document.addEventListener("online", this.connected, false);
    }
    AppComponent.prototype.close = function (reason) {
        this.reason = reason;
        this.sidenav.close();
    };
    AppComponent.prototype.ngOnInit = function () {
    };
    AppComponent.prototype.activate = function (activeState) {
        this.active = activeState;
        this.close('escape');
    };
    AppComponent.prototype.eventSubscriptionInit = function () {
        var _this = this;
        this.eventService.getMessage(_events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_4__["TimetableUpdated"]).subscribe(function (message) {
            console.log("timetable update catch");
            _this.setTimetable();
            _this.timetableIsActual = true;
        });
        this.eventService.getMessage(_events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_11__["AppVersionUpdated"]).subscribe(function (message) {
            _this.afterNotificationUpdate();
        });
        this.eventService.getMessage(_events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_5__["TimetableVersionChanged"]).subscribe(function (message) {
            _this.timetableIsActual = false;
        });
        this.eventService.getMessage(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_6__["LocationDetected"]).subscribe(function (message) {
            console.log("locationIsDetected so navigate to:");
            _this.zone.run(function () {
                _this.locationIsDetected = true;
                _this.appState.currentLocation = message.currentLocation;
                if (message.currentLocation == null) {
                    _this.router.navigate(["courses"]);
                }
                else {
                    _this.appState.noLocation = false;
                    _this.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Znaleźono lokalizacje użytkownika:" + message.currentLocation));
                    _this.appState.direction = _this.locationService.getDirection();
                    _this.router.navigate(["start"]);
                }
            });
        });
        this.eventService.getMessage(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]).subscribe(function (message) {
            _this.progressInfo = message.message;
        });
        this.eventService.getMessage(_events_NoInternet__WEBPACK_IMPORTED_MODULE_10__["NoInternet"]).subscribe(function (message) {
            console.log("NoInternet catch or app no change");
            _this.afterNotificationUpdate();
        });
    };
    AppComponent.prototype.connected = function () {
        // this.timetableIsActual = false;
        console.log("Connection return");
    };
    AppComponent.prototype.checkStart = function () {
        var connection = navigator.connection.type;
        console.log(connection);
        if (connection == "none") {
            this.snackBar.open("Brak połączenia z siecią!", "", {
                duration: 2000,
            });
        }
        else {
            this.router.navigate(["start"]);
        }
        // navigator.permissions.query({ 'name': 'geolocation' })
        //   .then(permission => {
        //     if (permission.state == "denied"){
        //       this.snackBar.open("Udostpnij lokalizacje!", "", {
        //         duration: 2000,
        //       });
        //     }
        //   }
        //   )
    };
    AppComponent.prototype.afterNotificationUpdate = function () {
        var _this = this;
        this.message = this.notService.getMessage();
        this.appVersion = this.notService.getAppVersion();
        this.setTimetable();
        this.timetableIsActual = true;
        var that = this;
        that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Sprawdzanie lokalizacji"));
        this.locationService.locationIsEnabled().then(function (data) {
            _this.zone.run(function () {
                if (data == true) {
                    that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Sprawdzanie lokalizacji"));
                    _this.locationService.getLocationForLatAndLeng();
                    var i = 1;
                    setTimeout(function () {
                        if (_this.locationIsDetected != true) {
                            that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Nie można znaleźć lokalizacji, poczekaj"));
                            var locationEvent = new _events_LocationDetected__WEBPACK_IMPORTED_MODULE_6__["LocationDetected"]();
                            locationEvent.currentLocation = null;
                            that.appState.noLocation = true;
                            that.eventService.sendEvent(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_6__["LocationDetected"], locationEvent);
                        }
                    }, 6000);
                }
                else {
                    that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_14__["ProgressInfo"]("Brak lokalizcji"));
                    _this.locationIsDetected = true;
                    console.log("location is disable");
                    _this.router.navigate(["courses"]);
                }
            });
        });
    };
    AppComponent.prototype.setTimetable = function () {
        var _this = this;
        this.allCourses = this.timetableService.getTimetable();
        this.appState.timetable = this.allCourses;
        this.appState.allCourses = this.allCourses.Where(function (x) { return _this.legendService.courseIsInThisDay(x) == true; }).ToList();
        this.initSwip();
    };
    AppComponent.prototype.initSwip = function () {
        var that = this;
        window.addEventListener('load', function () {
            var touchsurface = document.getElementById('touchsurface'), startX, startY, dist, threshold = 100, //required min distance traveled to be considered swipe
            allowedTime = 300, // maximum time allowed to travel that distance
            elapsedTime, startTime;
            function handleswipe(isrightswipe, event) {
                if (isrightswipe) {
                    {
                        that.sidenav.open();
                    }
                }
                else {
                }
            }
            touchsurface.addEventListener('touchstart', function (e) {
                var touchobj = e.changedTouches[0];
                dist = 0;
                startX = touchobj.pageX;
                startY = touchobj.pageY;
                startTime = new Date().getTime(); // record time when finger first makes contact with surface
            }, false);
            touchsurface.addEventListener('touchmove', function (e) {
            }, false);
            touchsurface.addEventListener('touchend', function (e) {
                var touchobj = e.changedTouches[0];
                dist = touchobj.pageX - startX; // get total dist traveled by finger while in contact with surface
                elapsedTime = new Date().getTime() - startTime; // get time elapsed
                // check that elapsed time is within specified, horizontal dist traveled >= threshold, and vertical dist traveled <= 100
                var swipeLeftBol = (elapsedTime <= allowedTime && dist <= threshold && Math.abs(touchobj.pageY - startY) <= 100);
                var swiperightBol = (elapsedTime <= allowedTime && dist >= threshold && Math.abs(touchobj.pageY - startY) <= 100);
                if (swiperightBol)
                    handleswipe(swiperightBol, e);
                else if (swipeLeftBol) {
                    that.sidenav.close();
                }
            }, false);
        }, false); // end window.onload
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('sidenav'),
        __metadata("design:type", _angular_material_sidenav__WEBPACK_IMPORTED_MODULE_15__["MatSidenav"])
    ], AppComponent.prototype, "sidenav", void 0);
    AppComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html"),
            styles: [__webpack_require__(/*! ./app.component.css */ "./src/app/app.component.css")]
        }),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_9__["AppState"], _angular_material__WEBPACK_IMPORTED_MODULE_13__["MatSnackBar"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"], _angular_router__WEBPACK_IMPORTED_MODULE_8__["Router"], _services_NotificationService__WEBPACK_IMPORTED_MODULE_1__["NotificationService"],
            _services_TimetableUpdateService__WEBPACK_IMPORTED_MODULE_2__["TimetableUpdateService"], _services_LocationService__WEBPACK_IMPORTED_MODULE_3__["LocationService"],
            _services_LegendServices__WEBPACK_IMPORTED_MODULE_7__["LegendService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_12__["EventService"]])
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.constants.ts":
/*!**********************************!*\
  !*** ./src/app/app.constants.ts ***!
  \**********************************/
/*! exports provided: EVENTS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EVENTS", function() { return EVENTS; });
/* harmony import */ var _events_NoInternet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events/NoInternet */ "./src/app/events/NoInternet.ts");
/* harmony import */ var _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events/LocationDetected */ "./src/app/events/LocationDetected.ts");
/* harmony import */ var _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events/AppVersionUpdated */ "./src/app/events/AppVersionUpdated.ts");
/* harmony import */ var _events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events/TimetableUpdated */ "./src/app/events/TimetableUpdated.ts");
/* harmony import */ var _events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events/TimetableVersionChanged */ "./src/app/events/TimetableVersionChanged.ts");
/* harmony import */ var _events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events/CoursesFiltered */ "./src/app/events/CoursesFiltered.ts");
/* harmony import */ var _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./events/ProgressUpdated */ "./src/app/events/ProgressUpdated.ts");
/* harmony import */ var _events_LocationChanged__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./events/LocationChanged */ "./src/app/events/LocationChanged.ts");
/* harmony import */ var _events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./events/LatAndLngChanged */ "./src/app/events/LatAndLngChanged.ts");
/* harmony import */ var _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./events/ProgressInfo */ "./src/app/events/ProgressInfo.ts");










var EVENTS = [
    _events_NoInternet__WEBPACK_IMPORTED_MODULE_0__["NoInternet"],
    _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"],
    _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__["AppVersionUpdated"],
    _events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_3__["TimetableUpdated"],
    _events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_4__["TimetableVersionChanged"],
    _events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__["CoursesFiltered"],
    _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_6__["ProgressUpdated"],
    _events_LocationChanged__WEBPACK_IMPORTED_MODULE_7__["LocationChanged"],
    _events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_8__["LatAndLngChanged"],
    _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_9__["ProgressInfo"]
];


/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _course_course_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./course/course.component */ "./src/app/course/course.component.ts");
/* harmony import */ var _angular_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/http */ "./node_modules/@angular/http/fesm5/http.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var _services_NotificationService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./services/NotificationService */ "./src/app/services/NotificationService.ts");
/* harmony import */ var _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers/LocalStorageHelper */ "./src/app/helpers/LocalStorageHelper.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _services_TimetableUpdateService__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./services/TimetableUpdateService */ "./src/app/services/TimetableUpdateService.ts");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _services_TraficService__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./services/TraficService */ "./src/app/services/TraficService.ts");
/* harmony import */ var _start_start_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./start/start.component */ "./src/app/start/start.component.ts");
/* harmony import */ var _timetable_timetable_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./timetable/timetable.component */ "./src/app/timetable/timetable.component.ts");
/* harmony import */ var _services_LegendServices__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./services/LegendServices */ "./src/app/services/LegendServices.ts");
/* harmony import */ var ngx_material_timepicker__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ngx-material-timepicker */ "./node_modules/ngx-material-timepicker/fesm5/ngx-material-timepicker.js");
/* harmony import */ var _courses_courses_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./courses/courses.component */ "./src/app/courses/courses.component.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _home_home_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./home/home.component */ "./src/app/home/home.component.ts");
/* harmony import */ var _timetable_components_stopsSheets_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./timetable/components/stopsSheets.component */ "./src/app/timetable/components/stopsSheets.component.ts");
/* harmony import */ var _start_components_mapSheet_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./start/components/mapSheet.component */ "./src/app/start/components/mapSheet.component.ts");
/* harmony import */ var _start_components_watchedCourse_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./start/components/watchedCourse.component */ "./src/app/start/components/watchedCourse.component.ts");
/* harmony import */ var _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./services/BusLocationServices */ "./src/app/services/BusLocationServices.ts");
/* harmony import */ var _start_components_options_sheets_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./start/components/options-sheets.component */ "./src/app/start/components/options-sheets.component.ts");
/* harmony import */ var _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./single-course/single-course.component */ "./src/app/single-course/single-course.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





























var path = [
    { path: '', redirectTo: "home", pathMatch: 'full' },
    { path: "courses/:direction", component: _courses_courses_component__WEBPACK_IMPORTED_MODULE_19__["CoursesComponent"] },
    { path: "start", component: _start_start_component__WEBPACK_IMPORTED_MODULE_15__["StartComponent"] },
    { path: "timetable", component: _timetable_timetable_component__WEBPACK_IMPORTED_MODULE_16__["TimetableComponent"] },
    { path: "home", component: _home_home_component__WEBPACK_IMPORTED_MODULE_22__["HomeComponent"] }
];
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["NgModule"])({
            declarations: [
                _app_component__WEBPACK_IMPORTED_MODULE_0__["AppComponent"],
                _course_course_component__WEBPACK_IMPORTED_MODULE_1__["CourseComponent"],
                _start_start_component__WEBPACK_IMPORTED_MODULE_15__["StartComponent"],
                _start_components_watchedCourse_component__WEBPACK_IMPORTED_MODULE_25__["watchedCourseComponent"],
                _timetable_timetable_component__WEBPACK_IMPORTED_MODULE_16__["TimetableComponent"],
                _courses_courses_component__WEBPACK_IMPORTED_MODULE_19__["CoursesComponent"],
                _home_home_component__WEBPACK_IMPORTED_MODULE_22__["HomeComponent"],
                _timetable_components_stopsSheets_component__WEBPACK_IMPORTED_MODULE_23__["StopsSheets"],
                _start_components_options_sheets_component__WEBPACK_IMPORTED_MODULE_27__["OptionsSheets"],
                _start_components_mapSheet_component__WEBPACK_IMPORTED_MODULE_24__["MapSheet"],
                _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_28__["SingleCourseComponent"]
            ],
            imports: [
                _angular_router__WEBPACK_IMPORTED_MODULE_20__["RouterModule"].forRoot(path),
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_7__["BrowserModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatAutocompleteModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatBadgeModule"],
                [ngx_material_timepicker__WEBPACK_IMPORTED_MODULE_18__["NgxMaterialTimepickerModule"].forRoot()],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatBottomSheetModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatButtonToggleModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormsModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatCardModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatCheckboxModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatChipsModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatStepperModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatDatepickerModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatDialogModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatDividerModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatExpansionModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatGridListModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatIconModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatInputModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatListModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatMenuModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatNativeDateModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatPaginatorModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatProgressBarModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatProgressSpinnerModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatRadioModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatRippleModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSelectModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSidenavModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSliderModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSlideToggleModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSnackBarModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatSortModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatTableModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatTabsModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatToolbarModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatTooltipModule"],
                _angular_common_http__WEBPACK_IMPORTED_MODULE_3__["HttpClientModule"],
                _angular_http__WEBPACK_IMPORTED_MODULE_2__["HttpModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_6__["MatTreeModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_8__["BrowserAnimationsModule"]
            ],
            entryComponents: [_timetable_components_stopsSheets_component__WEBPACK_IMPORTED_MODULE_23__["StopsSheets"], _start_components_mapSheet_component__WEBPACK_IMPORTED_MODULE_24__["MapSheet"], _start_components_options_sheets_component__WEBPACK_IMPORTED_MODULE_27__["OptionsSheets"], _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_28__["SingleCourseComponent"]],
            providers: [_services_NotificationService__WEBPACK_IMPORTED_MODULE_9__["NotificationService"], _services_AppState__WEBPACK_IMPORTED_MODULE_21__["AppState"], _services_LegendServices__WEBPACK_IMPORTED_MODULE_17__["LegendService"], _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_10__["LocalStorageHelper"], _services_TimetableUpdateService__WEBPACK_IMPORTED_MODULE_12__["TimetableUpdateService"], _services_LocationService__WEBPACK_IMPORTED_MODULE_13__["LocationService"], _services_TraficService__WEBPACK_IMPORTED_MODULE_14__["TraficService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_11__["EventService"], _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_26__["BusLocationServices"]],
            bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_0__["AppComponent"]]
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/course/course.component.css":
/*!*********************************************!*\
  !*** ./src/app/course/course.component.css ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-expansion-indicator::after{\r\n    display: none!important;\r\n}\r\n.mat-expansion-panel{\r\n    padding-left: 4px!important;\r\n    padding-right: 4px!important;\r\n}\r\n.mat-expansion-panel-header{\r\n    padding-left: 2px!important;\r\n    padding-right: 2px!important;\r\n}\r\n.mat-expansion-panel-header span {\r\n    display: none!important;    \r\n}\r\n:host /deep/ .mat-expansion-panel-header-description{\r\n    flex-grow: 1!important;\r\n}\r\n.mat-grid-tile{\r\n}\r\n.gridHeader{\r\n    background-color:#5255e0;\r\n}\r\n:host /deep/ .mat-expansion-panel-body{\r\n    padding-left: 0px!important;\r\n    padding-right: 0px!important;\r\n}\r\n.colored-time{\r\n    color: #5255e0!important;\r\n    font-weight: bold;\r\n}\r\n.telesforColor{\r\n    background-color: #984444!important;\r\n}\r\n@-webkit-keyframes MyAnimation {\r\n    0% {\r\n\r\n      opacity: 0;\r\n    }\r\n    100% {\r\n        opacity: 1;\r\n    } \r\n  }\r\n@keyframes MyAnimation {\r\n    0% {\r\n\r\n      opacity: 0;\r\n    }\r\n    100% {\r\n        opacity: 1;\r\n    } \r\n  }\r\n.my-animation {\r\n    -webkit-animation: MyAnimation 1s;\r\n            animation: MyAnimation 1s;\r\n  }\r\n.rotate-animation{\r\n    transition-duration: 1s;\r\n    -webkit-transform: rotate(180deg);\r\n            transform: rotate(180deg);\r\n  }\r\n.rotate-back-animation{\r\n    transition-duration: 1s;\r\n    -webkit-transform: rotate(0deg);\r\n            transform: rotate(0deg);\r\n  }\r\n.first-stop{\r\n      border-bottom: solid 2px #5255e0;\r\n  }\r\n.more-less-text{\r\n      color: #e57373;\r\n      width: 100%;\r\n      text-align: center;\r\n      font-family: Roboto, \"Helvetica Neue\", sans-serif;\r\n  }\r\n.more-less-text span{\r\n    position: relative;\r\n    top: -7px;\r\n  }\r\n.blue-button{\r\n      background-color: #5255e0;\r\n  }\r\n:host /deep/ .mat-figure{\r\n    flex-direction: column;\r\n}"

/***/ }),

/***/ "./src/app/course/course.component.html":
/*!**********************************************!*\
  !*** ./src/app/course/course.component.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n  <div *ngIf=\"!coursesExist()\" style=\"width: 100%;text-align: center\">\r\n    <h3>Brak kursów</h3>\r\n  </div>\r\n  <div *ngIf=\"coursesExist()\">\r\n    <div *ngFor=\"let course of nearCourses\">\r\n      <mat-card (click)=\"showDetails(course)\" style=\"padding: 5px;margin:3px\">\r\n        <mat-grid-list cols=\"3\" rowHeight=\"3:1\">\r\n\r\n          <mat-grid-tile style=\"flex-direction:column\">\r\n            {{directionResolve(course.direction)}}\r\n            <p style=\"margin:2px;font-size: 12px;color: grey\">Przez</p>\r\n          </mat-grid-tile>\r\n          <!-- <mat-grid-tile style=\"flex-direction:column-reverse\">\r\n            Kraków\r\n            <p style=\"margin:2px;font-size: 12px;color: grey\">Z</p>\r\n          </mat-grid-tile> -->\r\n          <mat-grid-tile style=\"flex-direction:column\">\r\n            {{course.courseFirstStop.timeString}}\r\n            <p style=\"margin:2px;font-size: 12px;color: grey\">Odjazd</p>\r\n          </mat-grid-tile>\r\n          <mat-grid-tile style=\"flex-direction:column;color:#e57373\">\r\n            {{calculateTime(course.courseFirstStop)}}\r\n            <p style=\"margin:2px;font-size: 12px;color: grey\">Za</p>\r\n          </mat-grid-tile>\r\n        </mat-grid-list>\r\n      </mat-card>\r\n    </div>\r\n  </div>\r\n  </div>"

/***/ }),

/***/ "./src/app/course/course.component.ts":
/*!********************************************!*\
  !*** ./src/app/course/course.component.ts ***!
  \********************************************/
/*! exports provided: CourseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseComponent", function() { return CourseComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var linqts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! linqts */ "./node_modules/linqts/dist/linqts.es.js");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _helpers_TimeEnum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/TimeEnum */ "./src/app/helpers/TimeEnum.ts");
/* harmony import */ var _services_TraficService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/TraficService */ "./src/app/services/TraficService.ts");
/* harmony import */ var _events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/CoursesFiltered */ "./src/app/events/CoursesFiltered.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../events/ProgressUpdated */ "./src/app/events/ProgressUpdated.ts");
/* harmony import */ var _events_LocationChanged__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../events/LocationChanged */ "./src/app/events/LocationChanged.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../single-course/single-course.component */ "./src/app/single-course/single-course.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var CourseComponent = /** @class */ (function () {
    function CourseComponent(traffic, matSnackBar, bottomSheet, locationService, eventService) {
        var _this = this;
        this.traffic = traffic;
        this.matSnackBar = matSnackBar;
        this.bottomSheet = bottomSheet;
        this.locationService = locationService;
        this.eventService = eventService;
        this.timetableIsActual = true;
        this.timePlus = _helpers_TimeEnum__WEBPACK_IMPORTED_MODULE_3__["TimeEnum"].old;
        this.timeMinus = _helpers_TimeEnum__WEBPACK_IMPORTED_MODULE_3__["TimeEnum"].veryNear;
        this.calculatingDuration = false;
        this.progressWidth = 0;
        this.mapShowed = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.coursSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.eventService.getMessage(_events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__["CoursesFiltered"]).subscribe(function (message) {
            _this.setTimetable();
        });
        this.eventService.getMessage(_events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_7__["ProgressUpdated"]).subscribe(function (message) {
            _this.progressWidth = message.progress;
        });
        this.eventService.getMessage(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_8__["LocationChanged"]).subscribe(function (message) {
            _this.setTimetable();
        });
    }
    CourseComponent.prototype.getNearCourse = function (courses, timePlus, timeMinus) {
        var _this = this;
        var cours = courses.Where(function (x) { return _this.timeIsNear(x, timePlus, timeMinus); }).ToList();
        return cours.ToArray();
    };
    CourseComponent.prototype.ngOnChanges = function (changes) {
        if ('allCourses' in changes) {
            this.setTimetable();
        }
        if ('firstStop' in changes) {
            this.setTimetable();
        }
        if ('date' in changes) {
            if (typeof changes.date.currentValue.getMonth === 'function') {
            }
            else {
                var date = new Date();
                var split = changes.date.currentValue.split(':');
                date.setHours(Number.parseInt(split[0].trim()));
                date.setMinutes(Number.parseInt(split[1].trim()));
                this.date = date;
            }
            this.setTimetable();
        }
    };
    CourseComponent.prototype.setTimetable = function () {
        this.nearCourses = this.getNearCourse(this.allCourses, this.timePlus, this.timeMinus);
    };
    // calculateTraffic(course: Course) {
    //   var connection = navigator.connection.type;
    //   console.log(connection);
    //   if (connection == "none") {
    //     this.matSnackBar.open("Brak połączenia z siecią!", "", {
    //       duration: 2000,
    //     });
    //     return;
    //   }
    //   course.traficIsCalculate = true;
    //   this.progressWidth = 1;
    //   this.traffic.calculateDurrationForStop(course, 0).then(data => {
    //     for (let i = 0; i < this.nearCourses.length; i++) {
    //       if (this.nearCourses[i].direction == course.direction && this.nearCourses[i].firstStop.timeString == course.firstStop.timeString)
    //         this.nearCourses[i] = course;
    //     }
    //   }, error => {
    //     course.traficIsCalculate = false;
    //     this.progressWidth = 0;
    //   });
    // }
    CourseComponent.prototype.isFirstStop = function (course, stop) {
        if (course.firstStop.city == stop.city)
            return true;
        return false;
    };
    CourseComponent.prototype.timeIsNear = function (cours, timePlus, timeMinus) {
        var stop = this.getStopForLocation(cours.stops);
        if (stop == null)
            return false;
        cours.courseFirstStop = stop;
        var now = this.date;
        var nowTo = new Date();
        var nowFrom = new Date();
        nowTo.setHours(now.getHours());
        nowTo.setMinutes(now.getMinutes() + timePlus);
        nowFrom.setHours(now.getHours());
        nowFrom.setMinutes(now.getMinutes() - timeMinus);
        var coursDate = new Date();
        coursDate.setHours(cours.courseFirstStop.time.hours, cours.courseFirstStop.time.minutes);
        if (coursDate >= nowFrom && coursDate <= nowTo) {
            return true;
        }
        return false;
    };
    CourseComponent.prototype.showDetails = function (course) {
        this.bottomSheet.open(_single_course_single_course_component__WEBPACK_IMPORTED_MODULE_10__["SingleCourseComponent"], { data: { course: course, fullMode: true } });
    };
    CourseComponent.prototype.getStopForLocation = function (stops) {
        var _this = this;
        var stop = null;
        stops.forEach(function (element) {
            if (element.city == _this.firstStop)
                stop = element;
        });
        return stop;
    };
    CourseComponent.prototype.ngOnInit = function () {
        this.setTimetable();
    };
    CourseComponent.prototype.calculateTime = function (stop) {
        if (stop.time == null)
            return "";
        var now = new Date();
        var stopDate = new Date();
        stopDate.setHours(stop.time.hours);
        stopDate.setMinutes(stop.time.minutes);
        var difference = stopDate.getTime() - now.getTime();
        var resultInMinutes = Math.round(difference / 60000);
        if (resultInMinutes >= 60) {
            var hourResult = Number.parseInt((resultInMinutes / 60).toString());
            var minResult = resultInMinutes % 60;
            return hourResult.toString() + " h " + minResult.toString() + " min";
        }
        else
            return resultInMinutes.toString() + " min";
    };
    CourseComponent.prototype.coursesExist = function () {
        if (this.nearCourses == undefined)
            return false;
        var courseCount = this.nearCourses.length;
        if (courseCount == 0) {
            return false;
        }
        return true;
    };
    CourseComponent.prototype.showMap = function (course) {
        this.mapShowed.emit(course);
    };
    CourseComponent.prototype.go = function (course) {
        this.coursSelected.emit(course);
    };
    CourseComponent.prototype.directionResolve = function (direction) {
        if (direction.includes("Ry"))
            return "Rybie";
        else if (direction.includes("Że"))
            return "Żegocina";
        else if (direction.includes("Ty"))
            return "Tymbark";
        else if (direction.includes("Sz"))
            return "Szyk";
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CourseComponent.prototype, "firstStop", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", linqts__WEBPACK_IMPORTED_MODULE_1__["List"])
    ], CourseComponent.prototype, "allCourses", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Date)
    ], CourseComponent.prototype, "date", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CourseComponent.prototype, "mapShowed", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CourseComponent.prototype, "coursSelected", void 0);
    CourseComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-course',
            template: __webpack_require__(/*! ./course.component.html */ "./src/app/course/course.component.html"),
            styles: [__webpack_require__(/*! ./course.component.css */ "./src/app/course/course.component.css")]
        }),
        __metadata("design:paramtypes", [_services_TraficService__WEBPACK_IMPORTED_MODULE_4__["TraficService"], _angular_material__WEBPACK_IMPORTED_MODULE_9__["MatSnackBar"], _angular_material__WEBPACK_IMPORTED_MODULE_9__["MatBottomSheet"], _services_LocationService__WEBPACK_IMPORTED_MODULE_2__["LocationService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_6__["EventService"]])
    ], CourseComponent);
    return CourseComponent;
}());



/***/ }),

/***/ "./src/app/courses/courses.component.css":
/*!***********************************************!*\
  !*** ./src/app/courses/courses.component.css ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".herb{\r\n    width: 70px;height: 85px;\r\n    margin: 0 auto;\r\n    opacity: 0.8;\r\n}\r\ndiv{\r\n    font-family: Roboto, \"Helvetica Neue\", sans-serif;\r\n}\r\n:host /deep/ .timepicker__header{\r\n    background-color: #e57373!important;\r\n}\r\n:host /deep/ .timepicker-button{\r\n    color: #e57373!important;\r\n}\r\n.subTolbar button{\r\n margin-left: 10px;\r\n}\r\n.subTolbar i{\r\n    margin-right: 5px;\r\n}"

/***/ }),

/***/ "./src/app/courses/courses.component.html":
/*!************************************************!*\
  !*** ./src/app/courses/courses.component.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div>\r\n        <mat-toolbar style=\"height:50px\" color=\"primary\">\r\n                <div class=\"subTolbar\">\r\n                  <mat-form-field style=\"width: 100px;\r\n                  font-size: 14px;\">\r\n                    <mat-select placeholder=\"Z przystanku\" [(ngModel)]=\"firstStop\">\r\n                      <mat-option *ngFor=\"let stop of stops\" [value]=\"stop.city\">\r\n                        {{stop.city}}\r\n                      </mat-option>\r\n                    </mat-select>\r\n                  </mat-form-field>\r\n                  <mat-form-field style=\"margin-left:20px;width: 70px;\r\n                  font-size: 14px;\">\r\n                    <input matInput type=\"time\" placeholder=\"O godzinie\" [(ngModel)]=\"now\">\r\n                </mat-form-field>\r\n                <button (click)=\"setNow()\"  mat-button><i\r\n                    class=\"material-icons\">\r\n                    access_time\r\n                  </i>Teraz</button>\r\n                </div>\r\n              </mat-toolbar>\r\n    <div style=\"height: 87px;width: 100%;font-size: 20px; margin-top: 10px; display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    text-align: center;\">\r\n        <img src=\"{{imgSrc}}\" class=\"herb\">\r\n    </div>\r\n    <app-course [allCourses]=\"limCourses\" [firstStop]=\"firstStop\" [date]=\"now\"></app-course>\r\n\r\n</div>"

/***/ }),

/***/ "./src/app/courses/courses.component.ts":
/*!**********************************************!*\
  !*** ./src/app/courses/courses.component.ts ***!
  \**********************************************/
/*! exports provided: CoursesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoursesComponent", function() { return CoursesComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/LocationService */ "./src/app/services/LocationService.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CoursesComponent = /** @class */ (function () {
    function CoursesComponent(appState, route, router, zone, locationService) {
        this.appState = appState;
        this.route = route;
        this.router = router;
        this.zone = zone;
        this.locationService = locationService;
        this.now = new Date();
        this.firstStop = "Kraków";
        this.allCourses = this.appState.allCourses;
        this.stops = this.locationService.stopsLatAndLng;
    }
    CoursesComponent.prototype.ngOnInit = function () {
        var _this = this;
        console.log("courses");
        this.route.params.subscribe(function (params) {
            _this.direction = params["direction"];
            _this.zone.run(function () {
                if (_this.direction == "Krk") {
                    _this.firstStop = "Kraków";
                    _this.imgSrc = "../../assets/LimHerb.png";
                }
                if (_this.direction == "Lim") {
                    _this.firstStop == "Limanowa";
                    _this.imgSrc = "../../assets/KrkHerb.png";
                }
                _this.getCourseForDirection();
            });
        });
    };
    CoursesComponent.prototype.setNow = function () {
        this.now = new Date();
    };
    CoursesComponent.prototype.getCourseForDirection = function () {
        var _this = this;
        this.limCourses = this.allCourses.Where(function (x) { return x.direction.startsWith(_this.direction); })
            .OrderBy(function (x) {
            var now = new Date();
            now.setHours(x.firstStop.time.hours);
            now.setMinutes(x.firstStop.time.minutes);
            return now;
        })
            .ToList();
    };
    CoursesComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-courses',
            template: __webpack_require__(/*! ./courses.component.html */ "./src/app/courses/courses.component.html"),
            styles: [__webpack_require__(/*! ./courses.component.css */ "./src/app/courses/courses.component.css")]
        }),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_1__["AppState"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"], _services_LocationService__WEBPACK_IMPORTED_MODULE_3__["LocationService"]])
    ], CoursesComponent);
    return CoursesComponent;
}());



/***/ }),

/***/ "./src/app/events/AppVersionUpdated.ts":
/*!*********************************************!*\
  !*** ./src/app/events/AppVersionUpdated.ts ***!
  \*********************************************/
/*! exports provided: AppVersionUpdated */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppVersionUpdated", function() { return AppVersionUpdated; });
var AppVersionUpdated = /** @class */ (function () {
    function AppVersionUpdated() {
    }
    return AppVersionUpdated;
}());



/***/ }),

/***/ "./src/app/events/CoursesFiltered.ts":
/*!*******************************************!*\
  !*** ./src/app/events/CoursesFiltered.ts ***!
  \*******************************************/
/*! exports provided: CoursesFiltered */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoursesFiltered", function() { return CoursesFiltered; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var CoursesFiltered = /** @class */ (function () {
    function CoursesFiltered() {
    }
    CoursesFiltered = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], CoursesFiltered);
    return CoursesFiltered;
}());



/***/ }),

/***/ "./src/app/events/LatAndLngChanged.ts":
/*!********************************************!*\
  !*** ./src/app/events/LatAndLngChanged.ts ***!
  \********************************************/
/*! exports provided: LatAndLngChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LatAndLngChanged", function() { return LatAndLngChanged; });
var LatAndLngChanged = /** @class */ (function () {
    function LatAndLngChanged(lat, lng) {
        this.lat = lat;
        this.lng = lng;
    }
    return LatAndLngChanged;
}());



/***/ }),

/***/ "./src/app/events/LocationChanged.ts":
/*!*******************************************!*\
  !*** ./src/app/events/LocationChanged.ts ***!
  \*******************************************/
/*! exports provided: LocationChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocationChanged", function() { return LocationChanged; });
var LocationChanged = /** @class */ (function () {
    function LocationChanged(location) {
        this.location = location;
    }
    return LocationChanged;
}());



/***/ }),

/***/ "./src/app/events/LocationDetected.ts":
/*!********************************************!*\
  !*** ./src/app/events/LocationDetected.ts ***!
  \********************************************/
/*! exports provided: LocationDetected */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocationDetected", function() { return LocationDetected; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var LocationDetected = /** @class */ (function () {
    function LocationDetected() {
    }
    LocationDetected = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], LocationDetected);
    return LocationDetected;
}());



/***/ }),

/***/ "./src/app/events/NoInternet.ts":
/*!**************************************!*\
  !*** ./src/app/events/NoInternet.ts ***!
  \**************************************/
/*! exports provided: NoInternet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NoInternet", function() { return NoInternet; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var NoInternet = /** @class */ (function () {
    function NoInternet() {
    }
    NoInternet = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])()
    ], NoInternet);
    return NoInternet;
}());



/***/ }),

/***/ "./src/app/events/ProgressInfo.ts":
/*!****************************************!*\
  !*** ./src/app/events/ProgressInfo.ts ***!
  \****************************************/
/*! exports provided: ProgressInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressInfo", function() { return ProgressInfo; });
var ProgressInfo = /** @class */ (function () {
    function ProgressInfo(message) {
        this.message = message;
    }
    return ProgressInfo;
}());



/***/ }),

/***/ "./src/app/events/ProgressUpdated.ts":
/*!*******************************************!*\
  !*** ./src/app/events/ProgressUpdated.ts ***!
  \*******************************************/
/*! exports provided: ProgressUpdated */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressUpdated", function() { return ProgressUpdated; });
var ProgressUpdated = /** @class */ (function () {
    function ProgressUpdated(progress) {
        this.progress = progress;
    }
    return ProgressUpdated;
}());



/***/ }),

/***/ "./src/app/events/TimetableUpdated.ts":
/*!********************************************!*\
  !*** ./src/app/events/TimetableUpdated.ts ***!
  \********************************************/
/*! exports provided: TimetableUpdated */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimetableUpdated", function() { return TimetableUpdated; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var TimetableUpdated = /** @class */ (function () {
    function TimetableUpdated() {
    }
    TimetableUpdated = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])()
    ], TimetableUpdated);
    return TimetableUpdated;
}());



/***/ }),

/***/ "./src/app/events/TimetableVersionChanged.ts":
/*!***************************************************!*\
  !*** ./src/app/events/TimetableVersionChanged.ts ***!
  \***************************************************/
/*! exports provided: TimetableVersionChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimetableVersionChanged", function() { return TimetableVersionChanged; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var TimetableVersionChanged = /** @class */ (function () {
    function TimetableVersionChanged() {
    }
    TimetableVersionChanged = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])()
    ], TimetableVersionChanged);
    return TimetableVersionChanged;
}());



/***/ }),

/***/ "./src/app/helpers/DirectionEnum.ts":
/*!******************************************!*\
  !*** ./src/app/helpers/DirectionEnum.ts ***!
  \******************************************/
/*! exports provided: DirectionEnum */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirectionEnum", function() { return DirectionEnum; });
var DirectionEnum;
(function (DirectionEnum) {
    DirectionEnum["KRL"] = "Krk-Ry-Lim";
    DirectionEnum["LRK"] = "Lim-Ry-Krk";
    DirectionEnum["KSL"] = "Krk-Sz-Lim";
    DirectionEnum["LSK"] = "Lim-Sz-Krk";
    DirectionEnum["KZL"] = "Krk-\u017Be-Lim";
    DirectionEnum["LZK"] = "Lim-\u017Be-Krk";
    DirectionEnum["LTK"] = "Lim-Ty-Krk";
    DirectionEnum["KTL"] = "Krk-Ty-Lim";
})(DirectionEnum || (DirectionEnum = {}));


/***/ }),

/***/ "./src/app/helpers/LocalStorageHelper.ts":
/*!***********************************************!*\
  !*** ./src/app/helpers/LocalStorageHelper.ts ***!
  \***********************************************/
/*! exports provided: LocalStorageHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalStorageHelper", function() { return LocalStorageHelper; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var LocalStorageHelper = /** @class */ (function () {
    function LocalStorageHelper() {
    }
    LocalStorageHelper.prototype.getWatchCourse = function () {
        var courseString = localStorage.getItem("watchCourse");
        if (courseString == "undefined")
            return undefined;
        var course = JSON.parse(courseString);
        return course;
    };
    LocalStorageHelper.prototype.saveWatchCourse = function (watchCourse) {
        localStorage.removeItem("watchCourse");
        localStorage.setItem("watchCourse", JSON.stringify(watchCourse));
    };
    LocalStorageHelper.prototype.saveTimetable = function (timetable) {
        localStorage.removeItem("timetable");
        localStorage.setItem("timetable", JSON.stringify(timetable));
    };
    LocalStorageHelper.prototype.getTimetable = function () {
        var timetableString = localStorage.getItem("timetable");
        var timetable = JSON.parse(timetableString);
        return timetable;
    };
    LocalStorageHelper.prototype.saveAppVersion = function (appVersion) {
        localStorage.removeItem("appVersion");
        localStorage.setItem("appVersion", appVersion.toString());
    };
    LocalStorageHelper.prototype.getAppVersion = function () {
        var appVersion = localStorage.getItem("appVersion");
        if (!appVersion)
            return 0;
        return Number.parseFloat(appVersion);
    };
    LocalStorageHelper.prototype.getTimetableVersion = function () {
        var version = localStorage.getItem("timetableVersion");
        if (!version)
            return 0;
        return Number.parseFloat(version);
    };
    LocalStorageHelper.prototype.saveTimetableVersion = function (timetableVersion) {
        localStorage.removeItem("timetableVersion");
        localStorage.setItem("timetableVersion", timetableVersion.toString());
    };
    LocalStorageHelper.prototype.getMessage = function () {
        var messageString = localStorage.getItem("message");
        var message = JSON.parse(messageString);
        return message;
    };
    LocalStorageHelper.prototype.saveMessage = function (message) {
        localStorage.removeItem("message");
        localStorage.setItem("message", JSON.stringify(message));
    };
    LocalStorageHelper.prototype.getSchoolFreeDay = function () {
        var freeDayString = localStorage.getItem("freeDay");
        if (!freeDayString)
            return null;
        var freDays = freeDayString.split(";");
        return freDays;
    };
    LocalStorageHelper.prototype.saveSchoolFreeDay = function (from, to) {
        localStorage.removeItem("freeDay");
        localStorage.setItem("freeDay", from + ";" + to);
    };
    LocalStorageHelper = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])()
    ], LocalStorageHelper);
    return LocalStorageHelper;
}());



/***/ }),

/***/ "./src/app/helpers/TimeEnum.ts":
/*!*************************************!*\
  !*** ./src/app/helpers/TimeEnum.ts ***!
  \*************************************/
/*! exports provided: TimeEnum, TimeEnumHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeEnum", function() { return TimeEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeEnumHelper", function() { return TimeEnumHelper; });
var TimeEnum;
(function (TimeEnum) {
    TimeEnum[TimeEnum["veryNear"] = 8] = "veryNear";
    TimeEnum[TimeEnum["near"] = 25] = "near";
    TimeEnum[TimeEnum["far"] = 35] = "far";
    TimeEnum[TimeEnum["old"] = 90] = "old";
})(TimeEnum || (TimeEnum = {}));
var TimeEnumHelper = /** @class */ (function () {
    function TimeEnumHelper() {
    }
    TimeEnumHelper.next = function (currentEnum) {
        switch (currentEnum) {
            case TimeEnum.near:
                return TimeEnum.far;
            case TimeEnum.far:
                return TimeEnum.old;
            case TimeEnum.veryNear:
                return TimeEnum.near;
            default:
                return currentEnum;
        }
    };
    TimeEnumHelper.previous = function (currentEnum) {
        switch (currentEnum) {
            case TimeEnum.near:
                return TimeEnum.veryNear;
            case TimeEnum.far:
                return TimeEnum.near;
            case TimeEnum.old:
                return TimeEnum.far;
            default:
                return currentEnum;
        }
    };
    return TimeEnumHelper;
}());



/***/ }),

/***/ "./src/app/helpers/TimetableBuilderHelper.ts":
/*!***************************************************!*\
  !*** ./src/app/helpers/TimetableBuilderHelper.ts ***!
  \***************************************************/
/*! exports provided: TimetableBuilderHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimetableBuilderHelper", function() { return TimetableBuilderHelper; });
/* harmony import */ var _models_Stop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/Stop */ "./src/app/models/Stop.ts");
/* harmony import */ var _models_Course__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Course */ "./src/app/models/Course.ts");
/* harmony import */ var _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DirectionEnum */ "./src/app/helpers/DirectionEnum.ts");
/* harmony import */ var linqts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! linqts */ "./node_modules/linqts/dist/linqts.es.js");




var TimetableBuilderHelper = /** @class */ (function () {
    function TimetableBuilderHelper() {
    }
    TimetableBuilderHelper.convertTimetableToList = function (timetable) {
        var timetableList = new linqts__WEBPACK_IMPORTED_MODULE_3__["List"]();
        if (timetable != undefined && timetable != null) {
            timetable.forEach(function (coursAny) {
                var cours = coursAny;
                var stops = cours.stops;
                timetableList.Add(cours);
            });
        }
        return timetableList;
    };
    TimetableBuilderHelper.buildTimetableFromJson = function (timetableJson) {
        var _this = this;
        var courses = new linqts__WEBPACK_IMPORTED_MODULE_3__["List"]();
        timetableJson.forEach(function (element) {
            if (element.kurs == "Limanowa-Rybie") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].LRK, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].LSK));
            }
            if (element.kurs == "Rybie-Limanowa") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].KRL, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].KSL));
            }
            if (element.kurs == "Krakow-Zegocina") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].KZL));
            }
            if (element.kurs == "Zegocina-Krakow") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].LZK));
            }
            if (element.kurs == "Limanowa-Tymbark") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].KTL));
            }
            if (element.kurs == "Tymbark-Limanowa") {
                courses.AddRange(_this.createCourses(element.kursy, _DirectionEnum__WEBPACK_IMPORTED_MODULE_2__["DirectionEnum"].LTK));
            }
        });
        return courses;
    };
    TimetableBuilderHelper.createCourses = function (coursesObject, direction, directionOr) {
        var _this = this;
        if (directionOr === void 0) { directionOr = null; }
        var courses = new Array();
        coursesObject.forEach(function (kurs) {
            var cours = new _models_Course__WEBPACK_IMPORTED_MODULE_1__["Course"]();
            if (direction.toString().includes("Ty"))
                cours.isTelesfor = true;
            if (directionOr == null)
                cours.direction = direction.toString();
            else {
                cours.direction = kurs["Szyk"] == "-" ? direction.toString() : directionOr.toString();
            }
            cours.legends = kurs["legends"];
            var stops = new Array();
            for (var name_1 in kurs) {
                if (name_1 != "legends" && kurs[name_1] != "-") {
                    var stopMinutes = Number.parseInt(kurs[name_1].substring(3));
                    var stopHours = Number.parseInt(kurs[name_1].substring(0, 2));
                    var time = { minutes: stopMinutes, hours: stopHours };
                    stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"](name_1, kurs[name_1], time));
                }
            }
            cours.stops = stops.sort(_this.sortStops);
            cours.firstStop = stops[0];
            _this.additinalStops(cours);
            courses.push(cours);
        });
        return courses;
    };
    TimetableBuilderHelper.additinalStops = function (course) {
        var orderedList;
        var stops = new Array();
        if (course.direction.startsWith("Krk")) {
            var dateNow = new Date();
            dateNow.setHours(course.firstStop.time.hours);
            dateNow.setMinutes(course.firstStop.time.minutes);
            dateNow.setMinutes(dateNow.getMinutes() + 7);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Plac inw.", this.pad(dateNow.getHours().toString(), 2) + ":" + this.pad(dateNow.getMinutes().toString(), 2), { minutes: dateNow.getMinutes(), hours: dateNow.getHours() }));
            dateNow.setMinutes(dateNow.getMinutes() + 6);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Mateczne", this.pad(dateNow.getHours().toString(), 2) + ":" + this.pad(dateNow.getMinutes().toString(), 2), { minutes: dateNow.getMinutes(), hours: dateNow.getHours() }));
            dateNow.setMinutes(dateNow.getMinutes() + 3);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Bonarka", this.pad(dateNow.getHours().toString(), 2) + ":" + this.pad(dateNow.getMinutes().toString(), 2), { minutes: dateNow.getMinutes(), hours: dateNow.getHours() }));
            dateNow.setMinutes(dateNow.getMinutes() + 6);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Bieżanów", this.pad(dateNow.getHours().toString(), 2) + ":" + this.pad(dateNow.getMinutes().toString(), 2), { minutes: dateNow.getMinutes(), hours: dateNow.getHours() }));
            var stopsList = new linqts__WEBPACK_IMPORTED_MODULE_3__["List"](course.stops);
            stopsList.AddRange(stops);
            orderedList = stopsList.OrderBy(function (x) { return x.timeString; }).ToArray();
        }
        if (course.direction.startsWith("Lim")) {
            var dateLast = new Date();
            dateLast.setMinutes(course.stops[course.stops.length - 2].time.minutes);
            dateLast.setHours(course.stops[course.stops.length - 2].time.hours);
            dateLast.setMinutes(dateLast.getMinutes() + 8);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Bieżanów", this.pad(dateLast.getHours().toString(), 2) + ":" + this.pad(dateLast.getMinutes().toString(), 2), { minutes: dateLast.getMinutes(), hours: dateLast.getHours() }));
            dateLast.setMinutes(dateLast.getMinutes() + 5);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Bonarka", this.pad(dateLast.getHours().toString(), 2) + ":" + this.pad(dateLast.getMinutes().toString(), 2), { minutes: dateLast.getMinutes(), hours: dateLast.getHours() }));
            dateLast.setMinutes(dateLast.getMinutes() + 3);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Mateczne", this.pad(dateLast.getHours().toString(), 2) + ":" + this.pad(dateLast.getMinutes().toString(), 2), { minutes: dateLast.getMinutes(), hours: dateLast.getHours() }));
            dateLast.setMinutes(dateLast.getMinutes() + 6);
            stops.push(new _models_Stop__WEBPACK_IMPORTED_MODULE_0__["Stop"]("Plac inw.", this.pad(dateLast.getHours().toString(), 2) + ":" + this.pad(dateLast.getMinutes().toString(), 2), { minutes: dateLast.getMinutes(), hours: dateLast.getHours() }));
            var stopsList = new linqts__WEBPACK_IMPORTED_MODULE_3__["List"](course.stops);
            stopsList.AddRange(stops);
            orderedList = stopsList.OrderBy(function (x) { return x.timeString; }).ToArray();
        }
        course.stops = orderedList;
    };
    TimetableBuilderHelper.sortStops = function (a, b) {
        if (a.time.hours > b.time.hours)
            return 1;
        if (a.time.hours == b.time.hours && a.time.minutes > b.time.minutes)
            return 1;
        if (a.time.hours == b.time.hours && a.time.minutes == b.time.minutes)
            return 0;
        if (a.time.hours < b.time.hours)
            return -1;
        if (a.time.hours == b.time.hours && a.time.minutes < b.time.minutes)
            return -1;
    };
    TimetableBuilderHelper.pad = function (num, size) {
        var s = num + "";
        while (s.length < size)
            s = "0" + s;
        return s;
    };
    return TimetableBuilderHelper;
}());



/***/ }),

/***/ "./src/app/home/home.component.css":
/*!*****************************************!*\
  !*** ./src/app/home/home.component.css ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/home/home.component.html":
/*!******************************************!*\
  !*** ./src/app/home/home.component.html ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/home/home.component.ts":
/*!****************************************!*\
  !*** ./src/app/home/home.component.ts ***!
  \****************************************/
/*! exports provided: HomeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HomeComponent", function() { return HomeComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var HomeComponent = /** @class */ (function () {
    function HomeComponent() {
    }
    HomeComponent.prototype.ngOnInit = function () {
    };
    HomeComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-home',
            template: __webpack_require__(/*! ./home.component.html */ "./src/app/home/home.component.html"),
            styles: [__webpack_require__(/*! ./home.component.css */ "./src/app/home/home.component.css")]
        }),
        __metadata("design:paramtypes", [])
    ], HomeComponent);
    return HomeComponent;
}());



/***/ }),

/***/ "./src/app/models/Course.ts":
/*!**********************************!*\
  !*** ./src/app/models/Course.ts ***!
  \**********************************/
/*! exports provided: Course */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Course", function() { return Course; });
var Course = /** @class */ (function () {
    function Course() {
        this.stops = new Array();
    }
    return Course;
}());



/***/ }),

/***/ "./src/app/models/Stop.ts":
/*!********************************!*\
  !*** ./src/app/models/Stop.ts ***!
  \********************************/
/*! exports provided: Stop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Stop", function() { return Stop; });
var Stop = /** @class */ (function () {
    function Stop(city, timeString, time) {
        this.city = city;
        this.timeString = timeString;
        this.time = time;
    }
    return Stop;
}());



/***/ }),

/***/ "./src/app/services/AppState.ts":
/*!**************************************!*\
  !*** ./src/app/services/AppState.ts ***!
  \**************************************/
/*! exports provided: AppState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppState", function() { return AppState; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/LocalStorageHelper */ "./src/app/helpers/LocalStorageHelper.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppState = /** @class */ (function () {
    function AppState(localDb) {
        this.localDb = localDb;
        this.noLocation = false;
        this.yourCord = {
            lat: 0,
            lng: 0
        };
    }
    AppState.prototype.saveWatchCourse = function () {
        this.localDb.saveWatchCourse(this.watchCourse);
    };
    AppState.prototype.getWatchCourse = function () {
        var watchCourse = this.localDb.getWatchCourse();
        this.watchCourse = watchCourse;
        return watchCourse;
    };
    AppState = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_1__["LocalStorageHelper"]])
    ], AppState);
    return AppState;
}());



/***/ }),

/***/ "./src/app/services/BusLocationServices.ts":
/*!*************************************************!*\
  !*** ./src/app/services/BusLocationServices.ts ***!
  \*************************************************/
/*! exports provided: BusLocationServices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BusLocationServices", function() { return BusLocationServices; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _node_modules_angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/@angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var httpOptions = {
    headers: new _node_modules_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpHeaders"]({
        'Content-Type': 'application/json',
        'Authorization': 'my-auth-token'
    })
};
var BusLocationServices = /** @class */ (function () {
    function BusLocationServices(http) {
        this.http = http;
    }
    BusLocationServices.prototype.getLocation = function (data) {
        return this.http.post("https://solidarnosclukowica.pl/MaxBus/getLocation.php", data, httpOptions);
    };
    BusLocationServices.prototype.insertLocation = function (command) {
        return this.http.post("https://solidarnosclukowica.pl/MaxBus/insertLocation.php", command, httpOptions);
    };
    BusLocationServices = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_node_modules_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"]])
    ], BusLocationServices);
    return BusLocationServices;
}());



/***/ }),

/***/ "./src/app/services/EventServices.ts":
/*!*******************************************!*\
  !*** ./src/app/services/EventServices.ts ***!
  \*******************************************/
/*! exports provided: EventSet, EventService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSet", function() { return EventSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventService", function() { return EventService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../app.constants */ "./src/app/app.constants.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var EventSet = /** @class */ (function () {
    function EventSet(subject, evenType) {
        this.subject = subject;
        this.evenType = evenType;
    }
    return EventSet;
}());

var EventService = /** @class */ (function () {
    function EventService() {
        this.events = new Array();
        this.subscribeEvents(_app_constants__WEBPACK_IMPORTED_MODULE_2__["EVENTS"]);
    }
    EventService.prototype.subscribeEvents = function (events) {
        var _this = this;
        events.forEach(function (event) {
            _this.events.push(new EventSet(new rxjs__WEBPACK_IMPORTED_MODULE_1__["Subject"](), event.name));
        });
    };
    EventService.prototype.sendEvent = function (x, message) {
        if (message === void 0) { message = null; }
        var type = x.name;
        var nextEvent;
        this.events.forEach(function (event) {
            if (event.evenType == type)
                nextEvent = event.subject;
        });
        nextEvent.next(message);
    };
    EventService.prototype.getMessage = function (x) {
        var subscribeEvent;
        var type = x.name;
        this.events.forEach(function (event) {
            if (event.evenType == type) {
                subscribeEvent = event.subject;
            }
        });
        return subscribeEvent.asObservable();
    };
    EventService.prototype.clearMessage = function (x) {
        var type = x.name;
        var nextEvent;
        this.events.forEach(function (event) {
            if (event.evenType == type)
                nextEvent = event.subject;
        });
        nextEvent.next();
    };
    EventService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], EventService);
    return EventService;
}());



/***/ }),

/***/ "./src/app/services/LegendServices.ts":
/*!********************************************!*\
  !*** ./src/app/services/LegendServices.ts ***!
  \********************************************/
/*! exports provided: LegendService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LegendService", function() { return LegendService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/AppVersionUpdated */ "./src/app/events/AppVersionUpdated.ts");
/* harmony import */ var _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/LocalStorageHelper */ "./src/app/helpers/LocalStorageHelper.ts");
/* harmony import */ var _EventServices__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EventServices */ "./src/app/services/EventServices.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var LegendService = /** @class */ (function () {
    function LegendService(eventService, localDb) {
        var _this = this;
        this.eventService = eventService;
        this.localDb = localDb;
        this.eventService.getMessage(_events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__["AppVersionUpdated"]).subscribe(function (message) {
            _this.schoolFreeDayFrom = message.schoolFreeDayFrom;
            _this.schoolFreeDayTo = message.schoolFreeDayTo;
        });
        this.getSchoolFreeDay();
    }
    LegendService.prototype.getSchoolFreeDay = function () {
        var freeDays = this.localDb.getSchoolFreeDay();
        if (freeDays == null)
            return;
        this.schoolFreeDayFrom = freeDays[0];
        this.schoolFreeDayTo = freeDays[1];
    };
    LegendService.prototype.courseIsInThisDay = function (course) {
        var result = false;
        var result2 = false;
        var result3 = false;
        var result4 = false;
        var result5 = false;
        var legends = course.legends.split(" ");
        var dayOfWeek = moment__WEBPACK_IMPORTED_MODULE_1__().weekday();
        for (var i = 0; i < legends.length; i++) {
            if (legends[i] === "S") {
                result = this.isNotShoolFreeDay(moment__WEBPACK_IMPORTED_MODULE_1__());
            }
            if (legends[i] === "P") {
                result2 = this.isOnlyFriday(dayOfWeek);
            }
            if (legends[i] === "F") {
                result3 = this.isWorkDay(dayOfWeek);
            }
            if (legends[i] === "6") {
                result4 = this.isSaturday(dayOfWeek);
            }
            if (legends[i] === "7") {
                result5 = this.isSunnday(dayOfWeek);
            }
        }
        ;
        if ((result5 || result4 || result3) && (!result || !result2))
            return true;
        else
            return false;
    };
    LegendService.prototype.isWorkDay = function (dayOfWeek) {
        if (dayOfWeek < 6 && dayOfWeek > 0)
            return true;
        return false;
    };
    LegendService.prototype.isSunnday = function (dayOfWeek) {
        console.log(dayOfWeek);
        if (dayOfWeek == 0)
            return true;
        return false;
    };
    LegendService.prototype.isSaturday = function (dayOfWeek) {
        if (dayOfWeek == 6)
            return true;
        return false;
    };
    LegendService.prototype.isOnlyFriday = function (dayOfWeek) {
        if (dayOfWeek == 5)
            return true;
        return false;
    };
    LegendService.prototype.isNotShoolFreeDay = function (now) {
        var start = moment__WEBPACK_IMPORTED_MODULE_1__(this.schoolFreeDayTo);
        var end = moment__WEBPACK_IMPORTED_MODULE_1__(this.schoolFreeDayTo);
        if (now >= start && now <= end)
            return false;
        return true;
    };
    LegendService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_EventServices__WEBPACK_IMPORTED_MODULE_4__["EventService"], _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_3__["LocalStorageHelper"]])
    ], LegendService);
    return LegendService;
}());



/***/ }),

/***/ "./src/app/services/LocationService.ts":
/*!*********************************************!*\
  !*** ./src/app/services/LocationService.ts ***!
  \*********************************************/
/*! exports provided: LocationService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocationService", function() { return LocationService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/LocationDetected */ "./src/app/events/LocationDetected.ts");
/* harmony import */ var _AppState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _EventServices__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_LocationChanged__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../events/LocationChanged */ "./src/app/events/LocationChanged.ts");
/* harmony import */ var _events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/LatAndLngChanged */ "./src/app/events/LatAndLngChanged.ts");
/* harmony import */ var _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../events/ProgressInfo */ "./src/app/events/ProgressInfo.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var LocationService = /** @class */ (function () {
    function LocationService(eventService, appState) {
        this.eventService = eventService;
        this.appState = appState;
        this.stopsLatAndLng = [{
                latFrom: 50.07013757140309,
                longFrom: 19.949011061307374,
                city: "Kraków"
            },
            {
                latFrom: 50.068826,
                longFrom: 19.925870,
                city: "Plac inw."
            }, {
                latFrom: 50.036917,
                longFrom: 19.939690,
                city: "Mateczne"
            },
            {
                latFrom: 50.028882,
                longFrom: 19.956833,
                city: "Bonarka"
            },
            {
                latFrom: 50.014457,
                longFrom: 19.997265,
                city: "Bieżanów"
            },
            {
                latFrom: 49.98729714024202,
                longFrom: 20.06225824356079,
                city: "Wieliczka"
            },
            {
                latFrom: 49.90803386622939,
                longFrom: 20.198804140090942,
                city: "Gdów"
            },
            {
                latFrom: 49.86477454391063,
                longFrom: 20.29152810573578,
                city: "Łapanów"
            },
            {
                latFrom: 49.80746441820928,
                longFrom: 20.314879417419434,
                city: "Rybie"
            },
            {
                latFrom: 49.845080336168024,
                longFrom: 20.36998420142902,
                city: "Trzciana"
            }, {
                latFrom: 49.811551,
                longFrom: 20.230321,
                city: "Lasocice"
            },
            {
                latFrom: 49.772098,
                longFrom: 20.232453,
                city: "Jodłownik"
            },
            {
                latFrom: 49.730311,
                longFrom: 20.324225,
                city: "Tymbark"
            },
            {
                latFrom: 49.813078229059876,
                longFrom: 20.420235993276265,
                city: "Żegocina"
            },
            {
                latFrom: 49.789475919461815,
                longFrom: 20.29715087385739,
                city: "Szyk"
            },
            {
                latFrom: 49.76163501912453,
                longFrom: 20.45033758454099,
                city: "Laskowa"
            },
            {
                latFrom: 49.699823079791976,
                longFrom: 20.419726967811584,
                city: "Limanowa"
            }
        ];
        this.currentLocation = "Kraków";
    }
    LocationService.prototype.getCurrentLocation = function () {
        return this.currentLocation;
    };
    LocationService.prototype.getReverseStops = function () {
        return this.stopsLatAndLng.reverse();
    };
    LocationService.prototype.getDirection = function () {
        switch (this.currentLocation) {
            case "Kraków":
            case "Wieliczka":
                return "Krk";
            case "Żegocina":
            case "Laskowa":
            case "Rybie":
            case "Szyk":
            case "Lasocice":
            case "Tymbark":
            case "Jodłownik":
            case "Limanowa":
                return "Lim";
        }
    };
    LocationService.prototype.getNextLocation = function (location) {
        var locationIndex;
        for (var i = 0; i < this.stopsLatAndLng.length; i++) {
            if (this.stopsLatAndLng[i].city == location) {
                locationIndex = i;
                break;
            }
        }
        if (locationIndex == this.stopsLatAndLng.length - 1) {
            return this.stopsLatAndLng[0].city;
        }
        else
            return this.stopsLatAndLng[locationIndex + 1].city;
    };
    LocationService.prototype.getLatLngForStop = function (stop) {
        var latlng;
        this.stopsLatAndLng.forEach(function (element) {
            if (element.city == stop.city)
                latlng = new google.maps.LatLng(element.latFrom, element.longFrom);
        });
        return latlng;
    };
    LocationService.prototype.locationIsEnabled = function () {
        return new Promise(function (resolve, reject) {
            resolve(true);
            cordova.plugins.diagnostic.isGpsLocationEnabled(function (enabled) {
                resolve(enabled);
                console.log("notError");
            }, function (error) {
                console.log("error");
                console.log(error);
                resolve("błąd");
            });
        });
    };
    LocationService.prototype.getLocationForLatAndLeng = function () {
        var _this = this;
        var that = this;
        var options = { enableHighAccuracy: true };
        console.log("location");
        try {
            var watchId = navigator.geolocation.getCurrentPosition(function (data) {
                console.log("user allow location");
                var locationEvent = new _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"]();
                locationEvent.currentLocation = null;
                var lat = data.coords.latitude;
                var leng = data.coords.longitude;
                _this.appState.yourCord = {
                    lat: lat,
                    lng: leng
                };
                for (var i = 0; i < latitudeRange.length; i++) {
                    if (lat < latitudeRange[i].latFrom && lat > latitudeRange[i].latTo && leng > latitudeRange[i].longFrom && leng < latitudeRange[i].longTo) {
                        that.currentLocation = latitudeRange[i].city;
                        locationEvent.currentLocation = that.currentLocation;
                        break;
                    }
                }
                that.appState.noLocation = false;
                that.eventService.sendEvent(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"], locationEvent);
            }, function (error) {
                that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Nie można znaleźć lokalizacji"));
                console.log("user not allow location");
                var locationEvent = new _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"]();
                locationEvent.currentLocation = null;
                that.eventService.sendEvent(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"], locationEvent);
            }, options);
        }
        catch (_a) {
            that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Nie można znaleźć lokalizacji"));
            var locationEvent = new _events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"]();
            locationEvent.currentLocation = null;
            that.eventService.sendEvent(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_1__["LocationDetected"], locationEvent);
        }
    };
    LocationService.prototype.startWatchPosition = function () {
        var _this = this;
        var that = this;
        var options = { enableHighAccuracy: true };
        that.watchId = navigator.geolocation.getCurrentPosition(function (data) {
            var lat = data.coords.latitude;
            var newLocation;
            var leng = data.coords.longitude;
            console.log(lat + " : " + leng);
            _this.appState.yourCord = {
                lat: lat,
                lng: leng
            };
            for (var i = 0; i < latitudeRange.length; i++) {
                if (lat < latitudeRange[i].latFrom && lat > latitudeRange[i].latTo && leng > latitudeRange[i].longFrom && leng < latitudeRange[i].longTo) {
                    newLocation = latitudeRange[i].city;
                    break;
                }
            }
            if (newLocation != that.currentLocation && newLocation != undefined) {
                that.currentLocation = newLocation;
                console.log(newLocation);
                that.eventService.sendEvent(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_4__["LocationChanged"], new _events_LocationChanged__WEBPACK_IMPORTED_MODULE_4__["LocationChanged"](newLocation));
            }
            else {
                that.eventService.sendEvent(_events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_5__["LatAndLngChanged"], new _events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_5__["LatAndLngChanged"](lat, leng));
            }
        }, function (error) { }, options);
    };
    LocationService.prototype.stopWatchPostion = function () {
        navigator.geolocation.clearWatch(this.watchId);
    };
    LocationService.prototype.findNextStops = function (course) {
        var yourLat = this.appState.yourCord.lat;
        var stops = course.stops;
        var index = stops.indexOf(course.firstStop);
        for (var i = index + 1; i < stops.length; i++) {
            if (course.direction.startsWith("Krk")) {
                var stopLat = this.getLatLngForStop(stops[i]).lat();
                if (stopLat > yourLat) {
                    course.firstStop = stops[i];
                    break;
                }
            }
            if (course.direction.startsWith("Lim")) {
                var stopLat = this.getLatLngForStop(stops[i]).lat();
                if (stopLat < yourLat) {
                    course.firstStop = stops[i];
                    break;
                }
            }
        }
    };
    LocationService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_EventServices__WEBPACK_IMPORTED_MODULE_3__["EventService"], _AppState__WEBPACK_IMPORTED_MODULE_2__["AppState"]])
    ], LocationService);
    return LocationService;
}());

var latitudeRange = [
    {
        latFrom: 50.063844,
        latTo: 50.072000,
        longFrom: 19.818382,
        longTo: 19.932884,
        city: "Plac inw."
    },
    {
        latFrom: 50.038299,
        latTo: 50.048633,
        longFrom: 19.985495,
        longTo: 19.908247,
        city: "Mateczne"
    },
    {
        latFrom: 50.007852,
        latTo: 50.01306,
        longFrom: 20.036630,
        longTo: 19.57595,
        city: "Bieżanów"
    },
    {
        latFrom: 49.9881,
        latTo: 49.9075,
        longFrom: 19.9944,
        longTo: 20.2615,
        city: "Wieliczka"
    },
    {
        latFrom: 49.9179,
        latTo: 49.8809,
        longFrom: 20.3120,
        longTo: 20.1620,
        city: "Gdów"
    },
    {
        latFrom: 49.8701,
        latTo: 49.8368,
        longFrom: 20.2579,
        longTo: 20.3280,
        city: "Łapanów"
    },
    {
        latFrom: 49.8112,
        latTo: 49.7405,
        longFrom: 20.2921,
        longTo: 20.3910,
        city: "Rybie"
    },
    {
        latFrom: 49.8289,
        latTo: 49.7822,
        longFrom: 20.3800,
        longTo: 20.4775,
        city: "Żegocina"
    },
    {
        latFrom: 49.8341,
        latTo: 49.7775,
        longFrom: 20.2166,
        longTo: 20.3130,
        city: "Szyk"
    },
    {
        latFrom: 49.8548,
        latTo: 49.8311,
        longFrom: 20.3323,
        longTo: 20.4435,
        city: "Trzciana"
    },
    {
        latFrom: 49.7629,
        latTo: 49.7387,
        longFrom: 20.3827,
        longTo: 20.5022,
        city: "Laskowa"
    },
    {
        latFrom: 49.7604,
        latTo: 49.5758,
        longFrom: 20.2866,
        longTo: 20.6450,
        city: "Limanowa"
    },
    {
        latFrom: 50.0975,
        latTo: 50.0040,
        longFrom: 19.8100,
        longTo: 20.0792,
        city: "Kraków"
    }
];


/***/ }),

/***/ "./src/app/services/NotificationService.ts":
/*!*************************************************!*\
  !*** ./src/app/services/NotificationService.ts ***!
  \*************************************************/
/*! exports provided: NotificationService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NotificationService", function() { return NotificationService; });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/LocalStorageHelper */ "./src/app/helpers/LocalStorageHelper.ts");
/* harmony import */ var _EventServices__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../events/AppVersionUpdated */ "./src/app/events/AppVersionUpdated.ts");
/* harmony import */ var _events_NoInternet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/NoInternet */ "./src/app/events/NoInternet.ts");
/* harmony import */ var _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../events/ProgressInfo */ "./src/app/events/ProgressInfo.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var NotificationService = /** @class */ (function () {
    function NotificationService(localDb, eventService) {
        this.localDb = localDb;
        this.eventService = eventService;
        this.notificationLink = "https://raw.githubusercontent.com/metinowy15/MaksBusApi/master/notification.JSON";
    }
    NotificationService.prototype.updateNotification = function () {
        var connection = navigator.connection.type;
        console.log(connection);
        this.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Nawiązywanie połączenia z internetem"));
        if (connection == "none") {
            console.log("notOnline");
            this.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Brak połączenia"));
            this.eventService.sendEvent(_events_NoInternet__WEBPACK_IMPORTED_MODULE_5__["NoInternet"]);
        }
        else {
            this.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Sprawdzanie aktualizacji"));
            var that = this;
            jquery__WEBPACK_IMPORTED_MODULE_0__["getJSON"](this.notificationLink, {
                format: "json"
            }).done(function (data) {
                var notification = data;
                var appVersion = that.localDb.getAppVersion();
                if (notification.appVersion > appVersion) {
                    notification.message.unread = true;
                    that.localDb.saveAppVersion(notification.appVersion);
                    that.localDb.saveMessage(notification.message);
                    that.localDb.saveSchoolFreeDay(notification.schoolDayFreeFrom, notification.schoolDayFreeTo);
                    var appVersionEvent = new _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_4__["AppVersionUpdated"]();
                    appVersionEvent.appVersion = notification.appVersion;
                    appVersionEvent.timetableVersion = notification.timetableVersion;
                    appVersionEvent.schoolFreeDayFrom = notification.schoolDayFreeFrom;
                    appVersionEvent.schoolFreeDayTo = notification.schoolDayFreeTo;
                    appVersionEvent.message = notification.message;
                    console.log("appVersion change");
                    that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Nowa wersja aplikacji:" + notification.appVersion.toString()));
                    that.eventService.sendEvent(_events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_4__["AppVersionUpdated"], appVersionEvent);
                }
                else {
                    console.log("Not app version changes");
                    that.eventService.sendEvent(_events_NoInternet__WEBPACK_IMPORTED_MODULE_5__["NoInternet"]);
                    that.eventService.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_6__["ProgressInfo"]("Rozkład jazdy aktualny"));
                }
            });
        }
    };
    NotificationService.prototype.saveMessage = function (message) {
        this.localDb.saveMessage(message);
    };
    NotificationService.prototype.getAppVersion = function () {
        var appVersion = this.localDb.getAppVersion();
        return appVersion;
    };
    NotificationService.prototype.getMessage = function () {
        var message = this.localDb.getMessage();
        return message;
    };
    NotificationService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])(),
        __metadata("design:paramtypes", [_helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_2__["LocalStorageHelper"], _EventServices__WEBPACK_IMPORTED_MODULE_3__["EventService"]])
    ], NotificationService);
    return NotificationService;
}());



/***/ }),

/***/ "./src/app/services/TimetableUpdateService.ts":
/*!****************************************************!*\
  !*** ./src/app/services/TimetableUpdateService.ts ***!
  \****************************************************/
/*! exports provided: TimetableUpdateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimetableUpdateService", function() { return TimetableUpdateService; });
/* harmony import */ var _EventServices__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/LocalStorageHelper */ "./src/app/helpers/LocalStorageHelper.ts");
/* harmony import */ var _events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/AppVersionUpdated */ "./src/app/events/AppVersionUpdated.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/TimetableUpdated */ "./src/app/events/TimetableUpdated.ts");
/* harmony import */ var _helpers_TimetableBuilderHelper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers/TimetableBuilderHelper */ "./src/app/helpers/TimetableBuilderHelper.ts");
/* harmony import */ var _events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../events/TimetableVersionChanged */ "./src/app/events/TimetableVersionChanged.ts");
/* harmony import */ var _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../events/ProgressInfo */ "./src/app/events/ProgressInfo.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var TimetableUpdateService = /** @class */ (function () {
    function TimetableUpdateService(enevtServ, localDb) {
        var _this = this;
        this.enevtServ = enevtServ;
        this.localDb = localDb;
        this.repoLink = "https://raw.githubusercontent.com/metinowy15/MaksBusApi/master/data.json";
        this.enevtServ.getMessage(_events_AppVersionUpdated__WEBPACK_IMPORTED_MODULE_2__["AppVersionUpdated"]).subscribe(function (message) {
            _this.checkTimetableVersion(message.timetableVersion);
        });
    }
    TimetableUpdateService.prototype.checkTimetableVersion = function (timeTableVersion) {
        var lastVersion = this.localDb.getTimetableVersion();
        if (timeTableVersion > lastVersion) {
            this.enevtServ.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_8__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_8__["ProgressInfo"]("Aktualizacja rozkładu jazdy"));
            this.enevtServ.sendEvent(_events_TimetableVersionChanged__WEBPACK_IMPORTED_MODULE_7__["TimetableVersionChanged"]);
            this.localDb.saveTimetableVersion(timeTableVersion);
            this.updateTimetable();
        }
    };
    TimetableUpdateService.prototype.getTimetable = function () {
        var timetable = this.localDb.getTimetable();
        return _helpers_TimetableBuilderHelper__WEBPACK_IMPORTED_MODULE_6__["TimetableBuilderHelper"].convertTimetableToList(timetable);
    };
    TimetableUpdateService.prototype.updateTimetable = function () {
        var that = this;
        jquery__WEBPACK_IMPORTED_MODULE_4__["getJSON"](this.repoLink, {
            format: "json"
        }).done(function (data) {
            var timetable = _helpers_TimetableBuilderHelper__WEBPACK_IMPORTED_MODULE_6__["TimetableBuilderHelper"].buildTimetableFromJson(data);
            console.log(timetable);
            that.localDb.saveTimetable(timetable.ToArray());
            var timetableEvent = new _events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_5__["TimetableUpdated"]();
            timetableEvent.timetable = timetable;
            console.log("updateTimetable");
            that.enevtServ.sendEvent(_events_ProgressInfo__WEBPACK_IMPORTED_MODULE_8__["ProgressInfo"], new _events_ProgressInfo__WEBPACK_IMPORTED_MODULE_8__["ProgressInfo"]("Rozkład jazdy zaaktualizowany"));
            that.enevtServ.sendEvent(_events_TimetableUpdated__WEBPACK_IMPORTED_MODULE_5__["TimetableUpdated"], timetableEvent);
        });
    };
    TimetableUpdateService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Injectable"])(),
        __metadata("design:paramtypes", [_EventServices__WEBPACK_IMPORTED_MODULE_0__["EventService"], _helpers_LocalStorageHelper__WEBPACK_IMPORTED_MODULE_1__["LocalStorageHelper"]])
    ], TimetableUpdateService);
    return TimetableUpdateService;
}());



/***/ }),

/***/ "./src/app/services/TraficService.ts":
/*!*******************************************!*\
  !*** ./src/app/services/TraficService.ts ***!
  \*******************************************/
/*! exports provided: TraficService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TraficService", function() { return TraficService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _EventServices__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../events/ProgressUpdated */ "./src/app/events/ProgressUpdated.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpHeaders"]({
        'Content-Type': 'application/json',
        'Authorization': 'my-auth-token'
    })
};
var stopNameInGoogle = {
    "Kraków": "50.069440, 19.949613",
    "Plac inw.": "50.068904, 19.925932",
    "Mateczne": "50.035941, 19.941330",
    "Bonarka": "50.028882,19.956833",
    "Bieżanów": "50.013463, 20.000331",
    "Wieliczka": "49.987269, 20.065606",
    "Gdów": "49.908338, 20.198642",
    "Łapanów": "49.864574, 20.291420",
    "Trzciana": "49.845080336168024,20.36998420142902",
    "Żegocina": "49.813078229059876,20.420235993276265",
    "Rybie": "49.80746441820928,20.314879417419434",
    "Szyk": "49.789475919461815, 20.29715087385739",
    "Laskowa": "49.76163501912453, 20.45033758454099",
    "Lasocice": "49.811551, 20.230321",
    "Jodłownik": "49.772098, 20.232453",
    "Tymbark": "49.730311, 20.324225",
    "Limanowa": "49.699823079791976, 20.419726967811584"
};
var TraficService = /** @class */ (function () {
    function TraficService(http, eventService) {
        this.http = http;
        this.eventService = eventService;
        this.apiLink = "https://maps.googleapis.com/maps/api/directions/json?origin=";
        this.key = "AIzaSyCKaopCdrGph_N28D9vVRrPsxRnNMqeUMU";
    }
    TraficService.prototype.getTimeAndDistance = function (lat, lng, toStop, travel) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var time = new Date();
            time.setHours(time.getHours() + (Math.floor(Math.random() * 6) + 1));
            var start = new google.maps.LatLng(lat, lng);
            _this.getDirection(start, stopNameInGoogle[toStop], time, travel).then(function (data) {
                resolve(data);
            }, function (error) {
                reject();
            });
        });
    };
    TraficService.prototype.calculateDurrationForStop = function (cours, i) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.eventService.sendEvent(_events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_4__["ProgressUpdated"], new _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_4__["ProgressUpdated"](_this.calculateProgress(cours, i)));
            if (cours.stops[i + 1] == null || cours.stops[i + 1] == undefined)
                resolve();
            var stop = cours.stops[i];
            var nextStop = cours.stops[i + 1];
            var time = new Date();
            time.setHours(stop.time.hours);
            time.setMinutes(stop.time.minutes);
            if (time < new Date())
                resolve();
            var timeTo = new Date();
            timeTo.setHours(nextStop.time.hours);
            timeTo.setMinutes(nextStop.time.minutes);
            _this.oldTimeTo = moment__WEBPACK_IMPORTED_MODULE_2__(timeTo);
            var that = _this;
            setTimeout(function () {
                that.send(stopNameInGoogle[stop.city], stopNameInGoogle[nextStop.city], time).then(function (resolve5) {
                    that.calculateTime(nextStop, time, timeTo, resolve5);
                    that.calculateDurrationForStop(cours, i + 1).then(function (end) {
                        resolve();
                    }, function (error) {
                        reject();
                    });
                }, function (error) {
                    reject();
                });
            }, 500);
        });
    };
    TraficService.prototype.calculateProgress = function (cours, i) {
        var coursLength = cours.stops.length - 1;
        var k = i / coursLength;
        var z = k * 100;
        return z;
    };
    TraficService.prototype.calculateTime = function (nextStop, timeFrom, timeTo, durationInTraffic) {
        if (durationInTraffic == null)
            durationInTraffic = this.oldTimeTo.diff(timeFrom, "seconds");
        var timeMz = moment__WEBPACK_IMPORTED_MODULE_2__(timeFrom).add((durationInTraffic), "seconds");
        var dateNew = timeMz.toDate();
        nextStop.time.hours = dateNew.getHours();
        nextStop.time.minutes = dateNew.getMinutes();
        nextStop.timeString = this.pad(nextStop.time.hours.toString(), 2) + ":" + this.pad(nextStop.time.minutes.toString(), 2);
    };
    TraficService.prototype.send = function (start, end, time) {
        return new Promise(function (resolve, reject) {
            var directionsService = new google.maps.DirectionsService;
            directionsService.route({
                origin: start,
                destination: end,
                travelMode: google.maps.TravelMode.DRIVING,
                drivingOptions: {
                    departureTime: time,
                    trafficModel: google.maps.TrafficModel.BEST_GUESS
                }
            }, function (data) {
                if (data == null) {
                    resolve(null);
                    console.log("Error");
                }
                try {
                    var duration = data.routes["0"].legs["0"].duration_in_traffic.value;
                }
                catch (_a) {
                    var durationWithoutTraffic = data.routes["0"].legs["0"].duration.value;
                    resolve(durationWithoutTraffic);
                }
                resolve(duration);
            });
        });
    };
    TraficService.prototype.getDirection = function (start, end, time, travel) {
        if (!travel)
            travel = google.maps.TravelMode.DRIVING;
        return new Promise(function (resolve, reject) {
            var directionsService = new google.maps.DirectionsService;
            directionsService.route({
                origin: start,
                destination: end,
                travelMode: travel,
                drivingOptions: {
                    departureTime: time,
                    trafficModel: google.maps.TrafficModel.BEST_GUESS
                }
            }, function (data) {
                if (data == null) {
                    reject();
                }
                else {
                    resolve(data);
                    console.log(data);
                }
            });
        });
    };
    TraficService.prototype.pad = function (num, size) {
        var s = num + "";
        while (s.length < size)
            s = "0" + s;
        return s;
    };
    TraficService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _EventServices__WEBPACK_IMPORTED_MODULE_3__["EventService"]])
    ], TraficService);
    return TraficService;
}());



/***/ }),

/***/ "./src/app/single-course/single-course.component.css":
/*!***********************************************************!*\
  !*** ./src/app/single-course/single-course.component.css ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host /deep/ .mat-figure{\r\n    flex-direction: column;\r\n}\r\n\r\n::ng-deep .mat-bottom-sheet-container{\r\n    max-height: 100vh!important;\r\n    height: 100vh!important;\r\n}"

/***/ }),

/***/ "./src/app/single-course/single-course.component.html":
/*!************************************************************!*\
  !*** ./src/app/single-course/single-course.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar style=\"position: fixed;\nheight: 50px;\ntop: 0px;\nleft: 0px;\" color=\"primary\">\n  <div class=\"subTolbar\">\n    <button (click)=\"back()\" mat-button><i\n        class=\"material-icons\">\n        arrow_back\n      </i></button>\n    <button *ngIf=\"fullMode\" [disabled]=\"course.traficIsCalculate\" (click)=\"calculateTraffic()\" mat-button><i\n        class=\"material-icons\">\n        update\n      </i> Oblicz czas w korkach</button>\n  </div>\n</mat-toolbar>\n<mat-nav-list style=\"margin-top:40px\">\n  <h3 style=\"text-align: center;\">{{resolveDirection(course)}}</h3>\n  <mat-grid-list cols=\"3\" rowHeight=\"3:1\">\n      <mat-grid-tile style=\"flex-direction:column-reverse\">\n          {{course.stops[0].timeString}}\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Odjazd</p>\n      </mat-grid-tile>\n      <mat-grid-tile style=\"flex-direction:column\">\n          {{course.stops[course.stops.length-1].timeString}}\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Przyjazd</p>\n      </mat-grid-tile>\n      <mat-grid-tile style=\"flex-direction:column;color:#e57373\">\n          {{calculateTravelTime(course)}}\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Czas</p>\n      </mat-grid-tile>\n    </mat-grid-list>\n  <br>\n  <mat-grid-list *ngIf=\"!fullMode\" cols=\"2\" rowHeight=\"20:3\">\n          <mat-grid-tile style=\"background-color:#e57373\">Przystanek</mat-grid-tile>\n          <mat-grid-tile style=\"background-color:#e57373\">Czas</mat-grid-tile>\n          <div *ngFor=\"let stop of course.stops\">\n            <mat-grid-tile>{{stop.city}}</mat-grid-tile>\n            <mat-grid-tile>{{stop.timeString}}</mat-grid-tile>\n          </div>\n  </mat-grid-list>\n  <mat-grid-list *ngIf=\"fullMode\" cols=\"3\" rowHeight=\"12:3\">\n    <mat-grid-tile style=\"background-color:#e57373\">Przystanek</mat-grid-tile>\n    <mat-grid-tile style=\"background-color:#e57373\">Czas</mat-grid-tile>\n    <mat-grid-tile style=\"background-color:#e57373\">Za</mat-grid-tile>\n    <div *ngFor=\"let stop of course.stops\">\n      <mat-grid-tile>{{stop.city}}</mat-grid-tile>\n      <mat-grid-tile>{{stop.timeString}}</mat-grid-tile>\n      <mat-grid-tile>{{calculateTimeString(stop)}}</mat-grid-tile>\n    </div>\n</mat-grid-list>\n  <div *ngIf=\"calculateInProgress\" style=\"height: 15px;margin-top: 10px; text-align: center;\">\n      <mat-progress-bar color=\"primary\" value=\"{{testEmitter | async}}\"></mat-progress-bar>\n  </div>\n  <div style=\"position: absolute; bottom: 0px;width: 90%;\">\n  <hr>\n  <div style=\"text-align: center;\" class=\"legend\" *ngFor=\"let legend of legends\">\n      <div>{{legend}} - {{symbolLegend[legend]}}</div>\n  </div>\n</div>\n</mat-nav-list>\n  \n  "

/***/ }),

/***/ "./src/app/single-course/single-course.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/single-course/single-course.component.ts ***!
  \**********************************************************/
/*! exports provided: SingleCourseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SingleCourseComponent", function() { return SingleCourseComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _services_TraficService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/TraficService */ "./src/app/services/TraficService.ts");
/* harmony import */ var _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../events/ProgressUpdated */ "./src/app/events/ProgressUpdated.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};








var SingleCourseComponent = /** @class */ (function () {
    function SingleCourseComponent(traffic, eventServ, zone, matSnackBar, bottomSheetRef, data) {
        var _this = this;
        this.traffic = traffic;
        this.eventServ = eventServ;
        this.zone = zone;
        this.matSnackBar = matSnackBar;
        this.bottomSheetRef = bottomSheetRef;
        this.data = data;
        this.fullMode = true;
        this.progressW = 0;
        this.calculateInProgress = false;
        this.testEmitter = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](this.progressW);
        this.symbolLegend = {
            "F": "kursuje w dni robocze",
            "7": "kursuje w niedzielę",
            "S": "nie kursuje w dni wolne od nauki szkolnej",
            "P": "kursuje tylko w piątek",
            "6": "kursuje w soboty"
        };
        this.course = data.course;
        this.fullMode = data.fullMode;
        this.subscription = this.eventServ.getMessage(_events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_3__["ProgressUpdated"]).subscribe(function (message) {
            _this.progressW = message.progress;
            _this.testEmitter.next(_this.progressW);
            console.log(message.progress);
        });
        this.legends = this.course.legends.split(" ");
    }
    SingleCourseComponent.prototype.openLink = function (event) {
        this.bottomSheetRef.dismiss();
        event.preventDefault();
    };
    SingleCourseComponent.prototype.calculateTimeString = function (stop) {
        if (stop.time == null)
            return "";
        var now = new Date();
        var stopDate = new Date();
        stopDate.setHours(stop.time.hours);
        stopDate.setMinutes(stop.time.minutes);
        var difference = stopDate.getTime() - now.getTime();
        var resultInMinutes = Math.round(difference / 60000);
        if (resultInMinutes >= 60) {
            var hourResult = Number.parseInt((resultInMinutes / 60).toString());
            var minResult = resultInMinutes % 60;
            return hourResult.toString() + " h " + minResult.toString() + " min";
        }
        else
            return resultInMinutes.toString() + " min";
    };
    SingleCourseComponent.prototype.ngOnInit = function () {
    };
    SingleCourseComponent.prototype.calculateTravelTime = function (course) {
        var firstStop = course.stops[0];
        var lastStop = course.stops[course.stops.length - 1];
        if (firstStop.time == null)
            return "";
        var lastStopDate = new Date();
        var firstStopDate = new Date();
        firstStopDate.setHours(firstStop.time.hours);
        firstStopDate.setMinutes(firstStop.time.minutes);
        lastStopDate.setHours(lastStop.time.hours);
        lastStopDate.setMinutes(lastStop.time.minutes);
        var difference = lastStopDate.getTime() - firstStopDate.getTime();
        var resultInMinutes = Math.round(difference / 60000);
        if (resultInMinutes >= 60) {
            var hourResult = Number.parseInt((resultInMinutes / 60).toString());
            var minResult = resultInMinutes % 60;
            return hourResult.toString() + " h " + minResult.toString() + " min";
        }
        else
            return resultInMinutes.toString() + " min";
    };
    SingleCourseComponent.prototype.resolveDirection = function (course) {
        switch (course.direction) {
            case "Krk-Że-Lim":
                return "Kraków - Zegocina - Limanowa";
            case "Krk-Ry-Lim":
                return "Kraków - Stare rybie - Limanowa";
            case "Krk-Sz-Lim":
                return "Kraków - Szyk - Limanowa";
            case "Lim-Sz-Krk":
                return "Limanowa - Szyk - Kraków";
            case "Lim-Że-Krk":
                return "Limanowa - Zegocina - Kraków";
            case "Lim-Ry-Krk":
                return "Limanowa - Stare rybie - Kraków";
            case "Lim-Ty-Krk":
                return "Limanowa - Tymbark - Kraków";
            case "Krk-Ty-Lim":
                return "Kraków - Tymbark - Limanowa";
            default:
                break;
        }
    };
    SingleCourseComponent.prototype.back = function () {
        this.bottomSheetRef.dismiss();
    };
    SingleCourseComponent.prototype.calculateTraffic = function () {
        var _this = this;
        this.calculateInProgress = true;
        var courseTmp = this.course;
        var connection = navigator.connection.type;
        console.log(connection);
        if (connection == "none") {
            this.matSnackBar.open("Brak połączenia z siecią!", "", {
                duration: 2000,
            });
            this.calculateInProgress = false;
            return;
        }
        if (this.dateIsPasst(courseTmp.stops[0])) {
            this.matSnackBar.open("Informacje o ruchu drogowym są dostępne tylko dla przyszłych i bieżących kursów!", "", {
                duration: 2000,
            });
            this.calculateInProgress = false;
            return;
        }
        courseTmp.traficIsCalculate = true;
        this.traffic.calculateDurrationForStop(courseTmp, 0).then(function (data) {
            _this.course = courseTmp;
            _this.calculateInProgress = false;
        }, function (error) {
            courseTmp.traficIsCalculate = false;
            _this.calculateInProgress = false;
        });
    };
    SingleCourseComponent.prototype.dateIsPasst = function (stop) {
        if (stop.time == null)
            return false;
        var now = new Date();
        var stopDate = new Date();
        stopDate.setHours(stop.time.hours);
        stopDate.setMinutes(stop.time.minutes);
        var difference = stopDate.getTime() - now.getTime();
        var resultInMinutes = Math.round(difference / 60000);
        if (resultInMinutes > 0)
            return false;
        else
            return true;
    };
    SingleCourseComponent.prototype.ngOnDestroy = function () {
        this.subscription.unsubscribe();
    };
    SingleCourseComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'single-course',
            template: __webpack_require__(/*! ./single-course.component.html */ "./src/app/single-course/single-course.component.html"),
            styles: [__webpack_require__(/*! ./single-course.component.css */ "./src/app/single-course/single-course.component.css")]
        }),
        __param(5, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_BOTTOM_SHEET_DATA"])),
        __metadata("design:paramtypes", [_services_TraficService__WEBPACK_IMPORTED_MODULE_2__["TraficService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_4__["EventService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"], _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatSnackBar"], _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatBottomSheetRef"], Object])
    ], SingleCourseComponent);
    return SingleCourseComponent;
}());



/***/ }),

/***/ "./src/app/start/components/map-sheet.html":
/*!*************************************************!*\
  !*** ./src/app/start/components/map-sheet.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div style=\"width: 100%;height: 400px;\" id=\"map\"></div>\r\n\r\n"

/***/ }),

/***/ "./src/app/start/components/mapSheet.component.ts":
/*!********************************************************!*\
  !*** ./src/app/start/components/mapSheet.component.ts ***!
  \********************************************************/
/*! exports provided: MapSheet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapSheet", function() { return MapSheet; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/BusLocationServices */ "./src/app/services/BusLocationServices.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






var MapSheet = /** @class */ (function () {
    function MapSheet(appState, locationServie, busLocation, bottomSheetRef, data) {
        this.appState = appState;
        this.locationServie = locationServie;
        this.busLocation = busLocation;
        this.bottomSheetRef = bottomSheetRef;
        this.data = data;
        this.course = data;
    }
    MapSheet.prototype.openLink = function (event) {
        this.bottomSheetRef.dismiss();
        event.preventDefault();
    };
    MapSheet.prototype.ngOnInit = function () {
        var firstStopCenter = this.locationServie.getLatLngForStop(this.course.firstStop);
        var latlng = new google.maps.LatLng(this.appState.yourCord.lat, this.appState.yourCord.lng);
        var map = new google.maps.Map(document.getElementById('map'), { zoom: 10, center: firstStopCenter, zoomControl: false,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            rotateControl: false,
            fullscreenControl: false });
        var marker = new google.maps.Marker({ position: latlng, map: map });
        this.addMarkersForCourse(map);
        this.addBusMarker(map);
    };
    MapSheet.prototype.addMarkersForCourse = function (map) {
        var _this = this;
        var image = {
            url: 'http://maps.google.com/mapfiles/kml/pal4/icon54.png',
            labelOrigin: new google.maps.Point(10, -3)
            // This marker is 20 pixels wide by 32 pixels high.
        };
        this.course.stops.forEach(function (stop) {
            var infowindow = new google.maps.InfoWindow({
                content: "<div style='color:black'>" + stop.city + ' ' + stop.timeString + "</div>",
            });
            var marker = new google.maps.Marker({
                position: _this.locationServie.getLatLngForStop(stop),
                map: map,
                icon: image,
                title: stop.city
            });
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        });
    };
    MapSheet.prototype.addBusMarker = function (map) {
        this.busLocation.getLocation({ direction: this.course.direction, time: this.course.stops[0].timeString }).subscribe(function (data) {
            if (data.time != undefined) {
                var image = {
                    url: 'http://maps.google.com/mapfiles/kml/shapes/bus.png',
                    labelOrigin: new google.maps.Point(10, -3)
                    // This marker is 20 pixels wide by 32 pixels high.
                };
                var lat = Number.parseFloat(data.time[0].Lat);
                var lng = Number.parseFloat(data.time[0].Lng);
                var stamp = new Date(data.time[0].Stamp);
                console.log(stamp);
                console.log(data.time[0].stamp);
                var latlng = new google.maps.LatLng(lat, lng);
                var infowindow = new google.maps.InfoWindow({
                    content: "<div style='color:black'>O godzinie: " + stamp.toLocaleTimeString() + " był tu</div>",
                });
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    icon: image
                });
                google.maps.event.addListener(marker, 'click', function () {
                    infowindow.open(map, marker);
                });
            }
        });
    };
    MapSheet = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'map-sheets',
            template: __webpack_require__(/*! ./map-sheet.html */ "./src/app/start/components/map-sheet.html"),
        }),
        __param(4, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_BOTTOM_SHEET_DATA"])),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_2__["AppState"], _services_LocationService__WEBPACK_IMPORTED_MODULE_3__["LocationService"], _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_4__["BusLocationServices"], _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatBottomSheetRef"], Object])
    ], MapSheet);
    return MapSheet;
}());



/***/ }),

/***/ "./src/app/start/components/options-sheets.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/start/components/options-sheets.component.ts ***!
  \**************************************************************/
/*! exports provided: OptionsSheets */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OptionsSheets", function() { return OptionsSheets; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var OptionsSheets = /** @class */ (function () {
    function OptionsSheets(bottomSheetRef, data) {
        this.bottomSheetRef = bottomSheetRef;
        this.data = data;
        this.message = "Nowa szkoła";
        this.message = data;
    }
    OptionsSheets.prototype.openLink = function (event) {
        this.bottomSheetRef.dismiss();
        event.preventDefault();
    };
    OptionsSheets.prototype.calculateTrafic = function () {
        this.bottomSheetRef.dismiss("calculateTrafic");
        event.preventDefault();
    };
    OptionsSheets.prototype.ride = function () {
        this.bottomSheetRef.dismiss("ride");
        event.preventDefault();
    };
    OptionsSheets.prototype.refresh = function () {
        this.bottomSheetRef.dismiss("refresh");
        event.preventDefault();
    };
    OptionsSheets = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'options-sheets',
            template: __webpack_require__(/*! ./options-sheets.html */ "./src/app/start/components/options-sheets.html"),
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_BOTTOM_SHEET_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatBottomSheetRef"], Object])
    ], OptionsSheets);
    return OptionsSheets;
}());



/***/ }),

/***/ "./src/app/start/components/options-sheets.html":
/*!******************************************************!*\
  !*** ./src/app/start/components/options-sheets.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-nav-list>\r\n<mat-list>\r\n        <div style=\"text-align:center\">\r\n        <mat-list-item (click)=\"calculateTrafic()\">Uwzglednij korki <div style=\"flex:1\"></div><i style=\"color:#5255e0!important\" class=\"material-icons\">\r\n                alarm\r\n                </i></mat-list-item>\r\n        <mat-list-item (click)=\"ride()\">Jedź<div style=\"flex:1\"></div><i style=\"color:#5255e0!important\" class=\"material-icons\">\r\n                directions_bus\r\n                </i></mat-list-item>\r\n        <mat-list-item (click)=\"refresh()\">Odśwież  <div style=\"flex:1\"></div><i style=\"color:#5255e0!important\" class=\"material-icons\">\r\n                cached\r\n                </i> </mat-list-item>\r\n    </div>\r\n</mat-list>\r\n<hr>\r\n<span style=\"color:#5255e0!important;font-size: 16px;margin-left:10px\">{{message}}</span>\r\n</mat-nav-list>"

/***/ }),

/***/ "./src/app/start/components/watched-course.css":
/*!*****************************************************!*\
  !*** ./src/app/start/components/watched-course.css ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".example-card{\r\n    background-color: #5255e0!important;\r\n    font-family: 'Kalam'!important;\r\n    color: black;\r\n}"

/***/ }),

/***/ "./src/app/start/components/watched-course.html":
/*!******************************************************!*\
  !*** ./src/app/start/components/watched-course.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-card class=\"example-card\">\r\n        <mat-card-header>\r\n          <mat-card-title>{{resolveDirection()}}</mat-card-title>\r\n          <mat-card-subtitle style=\"color:white\">Start: {{watchCourse.stops[0].timeString}} --> Przyjazd: {{watchCourse.stops[watchCourse.stops.length - 1].timeString}}</mat-card-subtitle>\r\n        </mat-card-header>\r\n        <div id=\"watchedMap\" style=\"height:300px;margin-top: 2px;margin-bottom: 6px\" mat-card-image></div>\r\n        <mat-card-content style=\"margin-bottom:5px\">\r\n          <p style=\"font-size: 16px;margin-bottom: 3px\">\r\n            Nastepny przystanek za: <span style=\"color:white\">{{resolveTime()}}</span>\r\n          </p>\r\n          <div style=\"color:white;font-size: 18px\">{{nextStopCiti}}</div>\r\n          <p style=\"margin-top:3px\">Odległość: <span style=\"color:white\">{{distance}}</span></p>\r\n        </mat-card-content>\r\n        <mat-card-actions style=\"border-top:#341a70 solid 2px;\r\n        margin-left: -20px;\r\n        margin-right: -16px;\">\r\n          <button (click)=\"share()\" mat-raised-button color=\"primary\">{{isSharing}}</button>\r\n          <button (click)=\"end()\" mat-raised-button color=\"primary\">Zakończ</button>\r\n        </mat-card-actions>\r\n      </mat-card>"

/***/ }),

/***/ "./src/app/start/components/watchedCourse.component.ts":
/*!*************************************************************!*\
  !*** ./src/app/start/components/watchedCourse.component.ts ***!
  \*************************************************************/
/*! exports provided: watchedCourseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "watchedCourseComponent", function() { return watchedCourseComponent; });
/* harmony import */ var _node_modules_angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/@angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _models_Course__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Course */ "./src/app/models/Course.ts");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _services_TraficService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/TraficService */ "./src/app/services/TraficService.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_LocationChanged__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../events/LocationChanged */ "./src/app/events/LocationChanged.ts");
/* harmony import */ var _models_Stop__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../models/Stop */ "./src/app/models/Stop.ts");
/* harmony import */ var _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../services/BusLocationServices */ "./src/app/services/BusLocationServices.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../events/LatAndLngChanged */ "./src/app/events/LatAndLngChanged.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var watchedCourseComponent = /** @class */ (function () {
    function watchedCourseComponent(appState, busService, locationService, eventService, traficService) {
        var _this = this;
        this.appState = appState;
        this.busService = busService;
        this.locationService = locationService;
        this.eventService = eventService;
        this.traficService = traficService;
        this.sharing = false;
        this.isSharing = "Udostepnij";
        this.endWatch = new _node_modules_angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.watchCourse = new _models_Course__WEBPACK_IMPORTED_MODULE_1__["Course"]();
        this.stopSubscription = this.eventService.getMessage(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_6__["LocationChanged"]).subscribe(function (message) {
            _this.appState.watchCourse = _this.watchCourse;
            _this.appState.saveWatchCourse();
            _this.init();
        });
        this.latLngSubscriptiom = this.eventService.getMessage(_events_LatAndLngChanged__WEBPACK_IMPORTED_MODULE_10__["LatAndLngChanged"]).subscribe(function (message) {
            _this.onLocationChange(message.lat, message.lng);
        });
    }
    watchedCourseComponent.prototype.addMarkersForCourse = function (map) {
        var _this = this;
        var image = {
            url: 'http://maps.google.com/mapfiles/kml/pal4/icon54.png',
            labelOrigin: new google.maps.Point(10, -3)
            // This marker is 20 pixels wide by 32 pixels high.
        };
        this.watchCourse.stops.forEach(function (stop) {
            var infowindow = new google.maps.InfoWindow({
                content: "<div style='color:black'>" + stop.city + ' ' + stop.timeString + "</div>",
            });
            var marker = new google.maps.Marker({
                position: _this.locationService.getLatLngForStop(stop),
                map: map,
                icon: image,
                title: stop.city
            });
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        });
    };
    watchedCourseComponent.prototype.init = function () {
        var _this = this;
        var directionsDisplay = new google.maps.DirectionsRenderer();
        this.directionDispla = directionsDisplay;
        var origin = new google.maps.LatLng(this.appState.yourCord.lat, this.appState.yourCord.lng);
        var firstStopCenter = this.locationService.getLatLngForStop(this.watchCourse.firstStop);
        var latlng = new google.maps.LatLng(this.appState.yourCord.lat, this.appState.yourCord.lng);
        var map = new google.maps.Map(document.getElementById('watchedMap'), {
            zoom: 10, center: firstStopCenter, zoomControl: false,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            rotateControl: false,
            fullscreenControl: false
        });
        this.watchedMap = map;
        this.youMarker = new google.maps.Marker({ position: latlng, map: map });
        this.addMarkersForCourse(map);
        this.traficService.getTimeAndDistance(this.appState.yourCord.lat, this.appState.yourCord.lng, this.getNextStop()).then(function (data) {
            _this.assignData(data);
            var t = { minutes: 1, hours: 1 };
            _this.bounds = new google.maps.LatLngBounds();
            _this.bounds.extend(origin);
            _this.bounds.extend(_this.locationService.getLatLngForStop(new _models_Stop__WEBPACK_IMPORTED_MODULE_7__["Stop"](_this.getNextStop(), "00", t)));
            map.fitBounds(_this.bounds);
            directionsDisplay.setDirections(data);
            directionsDisplay.setMap(map);
            console.log(data);
        });
    };
    watchedCourseComponent.prototype.assignData = function (data) {
        this.duration = data.routes["0"].legs["0"].duration_in_traffic.text;
        this.distance = data.routes["0"].legs["0"].distance.text;
        this.nextStop = data.routes["0"].legs["0"].end_address;
        // console.log(cordova.plugins);
        // cordova.plugins.notification.local.schedule({
        //     title: 'MaxBus',
        //     text: 'Kolejny przystanek za:' + this.duration,
        //     foreground: true
        // });
    };
    watchedCourseComponent.prototype.onLocationChange = function (newLat, newLng) {
        var _this = this;
        this.locationService.findNextStops(this.watchCourse);
        this.appState.watchCourse = this.watchCourse;
        this.appState.saveWatchCourse();
        var latlng = new google.maps.LatLng(newLat, newLng);
        this.traficService.getTimeAndDistance(newLat, newLng, this.getNextStop()).then(function (data) {
            _this.assignData(data);
            var t = { minutes: 1, hours: 1 };
            _this.bounds.extend(latlng);
            _this.bounds.extend(_this.locationService.getLatLngForStop(new _models_Stop__WEBPACK_IMPORTED_MODULE_7__["Stop"](_this.getNextStop(), "00", t)));
            _this.watchedMap.fitBounds(_this.bounds);
            _this.directionDispla.setDirections(data);
            _this.directionDispla.setMap(_this.watchedMap);
        });
        if (this.sharing) {
            this.busService.insertLocation({
                direction: this.watchCourse.direction,
                time: this.watchCourse.stops[0].timeString,
                stamp: moment__WEBPACK_IMPORTED_MODULE_9__().format('YYYY-MM-DD HH:mm:ss'),
                lat: newLat,
                lng: newLng
            }).subscribe(function (data) {
                console.log(data + "poszlo");
            });
        }
    };
    watchedCourseComponent.prototype.ngOnInit = function () {
        this.watchCourse = this.appState.watchCourse;
        this.appState.saveWatchCourse();
        this.init();
    };
    watchedCourseComponent.prototype.getStopForLocation = function (stops) {
        var _this = this;
        var stop = null;
        stops.forEach(function (element) {
            if (element.city == _this.locationService.getCurrentLocation())
                stop = element;
        });
        return stop;
    };
    watchedCourseComponent.prototype.resolveTime = function () {
        //TODO trzeba obsluzyc inna lokacje niz przystanek
        return this.duration;
    };
    watchedCourseComponent.prototype.resolveDirection = function () {
        switch (this.watchCourse.direction) {
            case "Krk-Że-Lim":
                return "Kraków - Zegocina - Limanowa";
            case "Krk-Ry-Lim":
                return "Kraków - Stare rybie - Limanowa";
            case "Krk-Sz-Lim":
                return "Kraków - Szyk - Limanowa";
            case "Lim-Sz-Krk":
                return "Limanowa - Szyk - Kraków";
            case "Lim-Że-Krk":
                return "Limanowa - Zegocina - Kraków";
            case "Lim-Ry-Krk":
                return "Limanowa - Stare rybie - Kraków";
            case "Lim-Ty-Krk":
                return "Limanowa - Tymbark - Kraków";
            case "Krk-Ty-Lim":
                return "Kraków - Tymbark - Limanowa";
            default:
                break;
        }
    };
    watchedCourseComponent.prototype.getNextStop = function () {
        var locationIndex;
        for (var i = 0; i < this.watchCourse.stops.length; i++) {
            if (this.watchCourse.stops[i].city == this.watchCourse.firstStop.city) {
                locationIndex = i;
                break;
            }
        }
        if (locationIndex == this.watchCourse.stops.length - 1) {
            this.nextStopCiti = this.watchCourse.stops[this.watchCourse.stops.length - 1].city;
        }
        else {
            this.nextStopCiti = this.watchCourse.stops[locationIndex + 1].city;
        }
        return this.nextStopCiti;
    };
    watchedCourseComponent.prototype.end = function () {
        this.endWatch.emit(null);
    };
    watchedCourseComponent.prototype.share = function () {
        var _this = this;
        if (this.sharing) {
            this.isSharing = "Udostepnij";
            this.sharing = false;
        }
        else {
            this.busService.insertLocation({
                direction: this.watchCourse.direction,
                time: this.watchCourse.stops[0].timeString,
                stamp: moment__WEBPACK_IMPORTED_MODULE_9__().format('YYYY-MM-DD HH:mm:ss'),
                lat: this.appState.yourCord.lat,
                lng: this.appState.yourCord.lng
            }).subscribe(function (data) {
                console.log(data + "poszlo");
                _this.sharing = true;
                _this.isSharing = "Przerwij";
            });
        }
    };
    watchedCourseComponent.prototype.ngOnDestroy = function () {
        this.stopSubscription.unsubscribe();
        this.latLngSubscriptiom.unsubscribe();
    };
    __decorate([
        Object(_node_modules_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], watchedCourseComponent.prototype, "endWatch", void 0);
    watchedCourseComponent = __decorate([
        Object(_node_modules_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'watched-course',
            template: __webpack_require__(/*! ./watched-course.html */ "./src/app/start/components/watched-course.html"),
            styles: [__webpack_require__(/*! ./watched-course.css */ "./src/app/start/components/watched-course.css")]
        }),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_2__["AppState"], _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_8__["BusLocationServices"], _services_LocationService__WEBPACK_IMPORTED_MODULE_3__["LocationService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_5__["EventService"], _services_TraficService__WEBPACK_IMPORTED_MODULE_4__["TraficService"]])
    ], watchedCourseComponent);
    return watchedCourseComponent;
}());



/***/ }),

/***/ "./src/app/start/start.component.css":
/*!*******************************************!*\
  !*** ./src/app/start/start.component.css ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".notification{\r\n    position: fixed;\r\n    bottom: 0px;\r\n    width: 100%;\r\n    background-color:#5255e0;\r\n    height: 30px;\r\n    padding-top: 15px;\r\n    padding-bottom: 5px;\r\n    color: white;\r\n    right: 0px;\r\n    transition-duration: 0.3s\r\n}\r\n\r\n.notification-hidden{\r\n    width: 50px!important;\r\n    border-radius: 90%;\r\n    bottom: 2px;\r\n    right: 4px;\r\n}\r\n\r\n.button-center{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 80%!important;\r\n}\r\n\r\n.app-version{\r\n    margin-right:15px;font-size: 20px;padding-bottom: 10px;float:right;margin-top: -3px;color: #7b1fa2;\r\n}\r\n\r\n@-webkit-keyframes MyColorAnimation {\r\n    0% {\r\n\r\n      color: #e30202\r\n    }\r\n    50% {\r\ncolor: #fea7a7\r\n    }\r\n    100%{\r\n        color: #e30202\r\n    }\r\n  }\r\n\r\n@keyframes MyColorAnimation {\r\n    0% {\r\n\r\n      color: #e30202\r\n    }\r\n    50% {\r\ncolor: #fea7a7\r\n    }\r\n    100%{\r\n        color: #e30202\r\n    }\r\n  }\r\n\r\n.unread-message {\r\n    -webkit-animation: MyColorAnimation 1s infinite;\r\n            animation: MyColorAnimation 1s infinite;\r\n  }\r\n\r\n.start{\r\n    margin-top: 50px;\r\n}\r\n\r\n.start p{\r\n    margin: 0px!important;\r\n    font-size: 14px;\r\n}\r\n\r\n.start-header{\r\n    width: 100%;\r\n    font-size: 16px!important;\r\n}\r\n\r\n.start-header a{\r\n    margin-left: 10px;\r\n}\r\n\r\n.gridHeader > ::ng-deep figure {\r\n    justify-content: flex-start !important;\r\n}\r\n\r\n.gridHeaderLeft >::ng-deep figure {\r\n    justify-content:flex-end!important;\r\n}\r\n\r\n.box {\r\n \r\n    display: flex;\r\n    flex-flow: column;\r\n    height: calc(100vh - 40px);\r\n}\r\n\r\n.box .row.header {\r\n    flex: 0 1 170px;\r\n    /* The above is shorthand for:\r\n    flex-grow: 0,\r\n    flex-shrink: 1,\r\n    flex-basis: auto\r\n    */\r\n}\r\n\r\n.box .row.content {\r\n    flex: 1 1 auto;\r\n}\r\n\r\nh2 {\r\n    font-size: 32px;\r\n    font-weight: 700;\r\n    margin-top: 0;\r\n    text-transform: capitalize;\r\n}\r\n\r\np {\r\n    margin: 0;\r\n}\r\n\r\nh2 span {\r\n    color: #ffbc13;\r\n}\r\n\r\n.header button {\r\n    background: rgb(255, 255, 255); border: 2px solid #3a1d6c; padding: 4px 10px; color: white; cursor: pointer; border-radius: 25px;\r\n}\r\n\r\n.header button.active {\r\n    background: #341a70; border: 2px solid #2c1774;\r\n}\r\n\r\n.header button.active > img {\r\n    -webkit-filter: brightness(2.0);\r\n    filter: brightness(2.0);\r\n}\r\n\r\n.time {\r\n    font-size: 26px;\r\n}\r\n\r\n.place {\r\n    font-size: 18px;\r\n}\r\n\r\n.direction-menu {\r\n    padding-top:10px;\r\n    text-align: center; background-color: #5255e0; height: auto;\r\n}\r\n\r\n.direction-menu button{\r\n    margin-right:5px\r\n}\r\n\r\n#mapStart{\r\n    width:100%;\r\n}\r\n\r\n.flex-map{\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex: 1;\r\n}\r\n\r\n.subTolbar{\r\n    text-align: center;\r\n\r\n}\r\n\r\n.subTolbar button{\r\n    min-width: 10px!important;\r\n    margin-left: 10px;\r\n}\r\n\r\n.activeDirection{\r\n    color: #c73d3d;\r\n}\r\n\r\n:host /deep/ .mat-figure{\r\n    flex-direction: column;\r\n}"

/***/ }),

/***/ "./src/app/start/start.component.html":
/*!********************************************!*\
  !*** ./src/app/start/start.component.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar style=\"height:50px\" color=\"primary\">\r\n  <div class=\"subTolbar\">\r\n    <mat-form-field style=\"width: 100px;\r\n    font-size: 14px;\">\r\n      <mat-select placeholder=\"Kierunek\">\r\n        <mat-option (click)=\"changeDirection()\" *ngFor=\"let dir of directions\" [value]=\"dir.value\">\r\n          {{dir.viewValue}}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <button (click)=\"changeTravelMode('WALKING')\" [ngClass]=\"{'activeDirection': travelMode =='WALKING'}\" mat-button><i\r\n        class=\"material-icons\">\r\n        directions_walk\r\n      </i></button>\r\n    <button (click)=\"changeTravelMode('BICYCLING')\" [ngClass]=\"{'activeDirection': travelMode =='BICYCLING'}\"\r\n      mat-button><i class=\"material-icons\">\r\n        directions_bike\r\n      </i></button>\r\n    <button (click)=\"changeTravelMode('DRIVING')\" [ngClass]=\"{'activeDirection': travelMode =='DRIVING'}\" mat-button><i\r\n        class=\"material-icons\">\r\n        directions_car\r\n      </i></button>\r\n  </div>\r\n</mat-toolbar>\r\n<mat-card style=\"padding: 0px;margin:3px\">\r\n  <div *ngIf=\"progressWidth > 0 && progressWidth < 100\">\r\n    <mat-progress-bar color=\"warn\" mode=\"determinate\" value=\"{{progressWidth}}\"></mat-progress-bar>\r\n  </div>\r\n  <div id=\"mapStart\" style=\"height:300px\" class=\"row content flex-map\"></div>\r\n  <mat-grid-list *ngIf=\"searchEnd\" cols=\"2\" rowHeight=\"3:1\">\r\n\r\n    <mat-grid-tile style=\"flex-direction:column\">\r\n      {{nearStop.city}}\r\n      <p style=\"margin:2px;font-size: 12px;color: grey\">Najbliższy przystanek</p>\r\n    </mat-grid-tile>\r\n    <mat-grid-tile style=\"flex-direction:column\">\r\n      {{nearStop.data.duration.text}}\r\n      <p style=\"margin:2px;font-size: 12px;color: grey\">Czas dojścia</p>\r\n    </mat-grid-tile>\r\n  </mat-grid-list>\r\n  <mat-grid-list *ngIf=\"!searchEnd\" cols=\"1\" rowHeight=\"3:1\">\r\n\r\n    <mat-grid-tile style=\"flex-direction:column\">\r\n      Znajdź odjazdy z najbliższego przystanku\r\n      <p style=\"margin:2px;font-size: 12px;color: grey\">określ kierunek i sposób dotarcia</p>\r\n    </mat-grid-tile>\r\n  </mat-grid-list>\r\n\r\n</mat-card>\r\n<mat-card style=\"padding: 0px;margin:3px;margin-top:10px;text-align: center;\">\r\n  <mat-grid-list *ngIf=\"!searchEnd && message !=undefined\" cols=\"1\" rowHeight=\"3:1\">\r\n\r\n    <mat-grid-tile style=\"flex-direction:column\">\r\n      {{message.text}}\r\n      <p style=\"margin:2px;font-size: 12px;color: grey\">{{message.timestamp}}</p>\r\n    </mat-grid-tile>\r\n  </mat-grid-list>\r\n</mat-card>\r\n\r\n<div *ngIf=\"searchEnd\">\r\n  <h3 style=\"text-align: center;font-family: Roboto, 'Helvetica Neue', sans-serif;\">Odjazdy z <span style=\"color:#e57373\">{{nearStop.city}}\r\n    </span></h3>\r\n  <div *ngFor=\"let course of displayCourses\">\r\n    <mat-card (click)=\"showDetails(course)\" style=\"padding: 5px;margin:3px\">\r\n      <mat-grid-list cols=\"3\" rowHeight=\"3:1\">\r\n\r\n        <mat-grid-tile style=\"flex-direction:column-reverse\">\r\n          {{course.direction}}\r\n          <p style=\"margin:2px;font-size: 12px;color: grey\">Kierunek</p>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile style=\"flex-direction:column\">\r\n          {{course.firstStop.timeString}}\r\n          <p style=\"margin:2px;font-size: 12px;color: grey\">Odjazd</p>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile style=\"flex-direction:column;color:#e57373\">\r\n          {{calculateTimeString(course.firstStop)}}\r\n          <p style=\"margin:2px;font-size: 12px;color: grey\">Za</p>\r\n        </mat-grid-tile>\r\n      </mat-grid-list>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n\r\n<!-- <div class=\"search-course button-center\">\r\n\r\n  <img (click)=\"searchCourse()\" width=\"150\" height=\"120\" src=\"../../assets/busStop.svg\">\r\n \r\n</div> \r\n<div *ngIf=\"watchCourse\">\r\n  <watched-course (endWatch)=\"onWatchEnd()\"></watched-course>\r\n</div>\r\n<div *ngIf=\"!watchCourse\">\r\n  <button *ngIf=\"searchEnd && checkPrev()\" (click)=\"getPrevCourse()\" color=\"primary\" style=\"position:fixed;left:2px;top:140px\"\r\n    mat-mini-fab><mat-icon>chevron_left</mat-icon></button>\r\n  <button *ngIf=\"searchEnd && checkNext()\" (click)=\"getNextCourse()\" color=\"primary\" style=\"position:fixed;right:2px;top:140px\"\r\n    mat-mini-fab><mat-icon>chevron_right</mat-icon></button>\r\n  <div class=\"box\">\r\n    <div class=\"row header\">\r\n      <div class=\"direction-menu\">\r\n        <button [disabled]=\"progressWidth > 0 && progressWidth < 100\" (click)=\"changeDirection()\">\r\n          <img *ngIf=\"direction == 'Lim'\" src=\"images/Krk.png\" width=\"25px\" height=\"25px\">\r\n          <img *ngIf=\"direction == 'Krk'\" src=\"images/Lim.png\" width=\"25px\" height=\"25px\">\r\n        </button>\r\n        <button [disabled]=\"progressWidth > 0 && progressWidth < 100\" [ngClass]=\"{'active' : travelMode == 'WALKING'}\" (click)=\"changeTravelMode('WALKING')\"><img\r\n            src=\"images/walk.png\" width=\"25px\" height=\"25px\"></button>\r\n        <button [disabled]=\"progressWidth > 0 && progressWidth < 100\" [ngClass]=\"{'active' : travelMode == 'BICYCLING'}\" (click)=\"changeTravelMode('BICYCLING')\"><img\r\n            src=\"images/bike.png\" width=\"25px\" height=\"25px\"></button>\r\n        <button [disabled]=\"progressWidth > 0 && progressWidth < 100\" [ngClass]=\"{'active' : travelMode == 'DRIVING'}\" (click)=\"changeTravelMode('DRIVING')\"><img\r\n            src=\"images/auto.png\" width=\"25px\" height=\"25px\"></button>\r\n      </div>\r\n      <div style=\"padding-top:10px;text-align: center;font-size: 14px; background-color: #5255e0; height: 110px;\">\r\n        <div *ngIf=\"!searchEnd\">Wybierz kierunek\r\n          <div style=\"color:white\">(LIM - do Limanowej, KRK - w strone Krakowa)</div>\r\n          <div>oraz sposób dotarcia na przystanek</div>\r\n          <div>Wymagana jest lokalizacja oraz połączenie z internetem</div>\r\n        </div>\r\n        <div *ngIf=\"searchEnd\">\r\n          <div>Czas dojścia na przystanek: <span style=\"color:white\">{{nearStop.data.duration.text}}</span></div>\r\n          <div style=\"height:35px\">Bus będzie o <span style=\"color:white\" class='time'>{{nearCourse.firstStop.timeString}}</span></div>\r\n          <div>na przystanku <span style=\"color:white\" class='place'>{{nearStop.city}}</span></div>\r\n          <div><span style=\"color:white;font-size: 13px\">{{resolveDirection()}}</span></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div id=\"mapStart\" class=\"row content flex-map\">\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"this.nearCourse\" (click)=\"showOptions()\" style=\"width:35px;position:fixed;bottom:0px;left:47%;border-top-left-radius: 10px;border-top-right-radius: 10px;text-align: center;background-color: #5255e0\"> <i class=\"material-icons\">\r\n    more_horiz</i> </div>\r\n</div>\r\n-->"

/***/ }),

/***/ "./src/app/start/start.component.ts":
/*!******************************************!*\
  !*** ./src/app/start/start.component.ts ***!
  \******************************************/
/*! exports provided: StartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StartComponent", function() { return StartComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _events_LocationDetected__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/LocationDetected */ "./src/app/events/LocationDetected.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _services_LocationService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/LocationService */ "./src/app/services/LocationService.ts");
/* harmony import */ var _events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../events/CoursesFiltered */ "./src/app/events/CoursesFiltered.ts");
/* harmony import */ var _services_NotificationService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/NotificationService */ "./src/app/services/NotificationService.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _components_mapSheet_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/mapSheet.component */ "./src/app/start/components/mapSheet.component.ts");
/* harmony import */ var _services_EventServices__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../services/EventServices */ "./src/app/services/EventServices.ts");
/* harmony import */ var _events_LocationChanged__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../events/LocationChanged */ "./src/app/events/LocationChanged.ts");
/* harmony import */ var _services_TraficService__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../services/TraficService */ "./src/app/services/TraficService.ts");
/* harmony import */ var _events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../events/ProgressUpdated */ "./src/app/events/ProgressUpdated.ts");
/* harmony import */ var _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../services/BusLocationServices */ "./src/app/services/BusLocationServices.ts");
/* harmony import */ var _components_options_sheets_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/options-sheets.component */ "./src/app/start/components/options-sheets.component.ts");
/* harmony import */ var _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../single-course/single-course.component */ "./src/app/single-course/single-course.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var secondsCounter = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["interval"])(15000);
var StartComponent = /** @class */ (function () {
    function StartComponent(appState, snackBar, traficService, busLocation, zone, bottomSheet, notService, eventServ, locationService) {
        var _this = this;
        this.appState = appState;
        this.snackBar = snackBar;
        this.traficService = traficService;
        this.busLocation = busLocation;
        this.zone = zone;
        this.bottomSheet = bottomSheet;
        this.notService = notService;
        this.eventServ = eventServ;
        this.locationService = locationService;
        this.hideNotification = true;
        this.unreadNotification = false;
        this.active = 'walk';
        this.nearStop = undefined;
        this.prommises = [];
        this.distances = [];
        this.progressWidth = 0;
        this.travelMode = 'walk';
        this.searchEnd = false;
        this.courseSkip = 0;
        this.directions = [{ value: 'krk', viewValue: 'Do Krakowa' },
            { value: 'lim', viewValue: 'Do Limanowej' }];
        this.allCourses = this.appState.allCourses;
        this.message = this.notService.getMessage();
        this.travelModeEnum = google.maps.TravelMode.WALKING;
        this.eventServ.getMessage(_events_LocationDetected__WEBPACK_IMPORTED_MODULE_2__["LocationDetected"]).subscribe(function (message) {
            _this.direction = _this.locationService.getDirection();
            _this.getCourseForDirection(true);
        });
        this.eventServ.getMessage(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_10__["LocationChanged"]).subscribe(function (message) {
            _this.location = message.location;
        });
        this.eventServ.getMessage(_events_ProgressUpdated__WEBPACK_IMPORTED_MODULE_12__["ProgressUpdated"]).subscribe(function (message) {
            _this.progressWidth = message.progress;
        });
        this.direction = this.appState.direction == null ? "Lim" : this.appState.direction;
        this.location = this.appState.currentLocation;
        if (this.location == null || this.location == undefined)
            this.location = "Limanowa";
        this.watchCourse = this.appState.getWatchCourse();
        this.subscription = this.eventServ.getMessage(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_10__["LocationChanged"]).subscribe(function (message) {
            // this.getCourseForDirection(true);
        });
    }
    StartComponent.prototype.searchCourse = function () {
        this.courseSkip = 0;
        this.progressWidth = 1;
        this.yourMarker = null;
        this.searchRecuretion(0);
    };
    StartComponent.prototype.searchRecuretion = function (index) {
        var _this = this;
        var stops = this.locationService.stopsLatAndLng;
        if (this.direction == "Lim")
            stops = this.locationService.getReverseStops();
        var coursLength = stops.length - 1;
        var k = index / coursLength;
        var z = k * 100;
        this.progressWidth = z;
        console.log(this.progressWidth);
        if (index == stops.length) {
            this.calculateTime();
            return;
        }
        this.traficService.getTimeAndDistance(this.appState.yourCord.lat, this.appState.yourCord.lng, stops[index].city, this.travelModeEnum).then(function (resolve) {
            _this.distances.push({ city: stops[index].city, data: resolve.routes["0"].legs["0"], response: resolve });
            _this.searchRecuretion(index + 1);
        }, function (error) {
            _this.searchRecuretion(index + 1);
        });
    };
    StartComponent.prototype.changeTravelMode = function (mode) {
        if (this.travelMode == mode)
            return;
        this.travelMode = mode;
        if (mode == "WALKING")
            this.travelModeEnum = google.maps.TravelMode.WALKING;
        if (mode == "BICYCLING")
            this.travelModeEnum = google.maps.TravelMode.BICYCLING;
        if (mode == "DRIVING")
            this.travelModeEnum = google.maps.TravelMode.DRIVING;
        this.searchEnd = false;
        this.nearStop = undefined;
        this.distances = [];
        this.searchCourse();
    };
    StartComponent.prototype.calculateTime = function () {
        var _this = this;
        this.distances.forEach(function (distance) {
            if (_this.nearStop == undefined)
                _this.nearStop = distance;
            if (distance.data.distance.value < _this.nearStop.data.distance.value) {
                _this.nearStop = distance;
            }
        });
        this.locationService.currentLocation = this.nearStop.city;
        this.searchNearCourse();
        console.log(this.nearStop);
    };
    StartComponent.prototype.calculateTimeString = function (stop) {
        if (stop.time == null)
            return "";
        var now = new Date();
        var stopDate = new Date();
        stopDate.setHours(stop.time.hours);
        stopDate.setMinutes(stop.time.minutes);
        var difference = stopDate.getTime() - now.getTime();
        var resultInMinutes = Math.round(difference / 60000);
        if (resultInMinutes >= 60) {
            var hourResult = Number.parseInt((resultInMinutes / 60).toString());
            var minResult = resultInMinutes % 60;
            return hourResult.toString() + " h " + minResult.toString() + " min";
        }
        else
            return resultInMinutes.toString() + " min";
    };
    StartComponent.prototype.calculateTrafic = function () {
        var _this = this;
        var that = this;
        this.nearCourse.traficIsCalculate = true;
        this.progressWidth = 1;
        this.traficService.calculateDurrationForStop(this.nearCourse, 0).then(function (data) {
            _this.initMap(_this.nearCourse);
        }, function (error) {
            _this.nearCourse.traficIsCalculate = false;
            _this.progressWidth = 0;
        });
    };
    StartComponent.prototype.showOptions = function () {
        var _this = this;
        this.bottomSheet.open(_components_options_sheets_component__WEBPACK_IMPORTED_MODULE_14__["OptionsSheets"], { data: this.message.text }).afterDismissed().subscribe(function (result) {
            if (result == "calculateTrafic" && _this.nearCourse.traficIsCalculate != true) {
                _this.calculateTrafic();
            }
            if (result == "ride") {
                _this.go();
            }
            if (result == "refresh") {
                _this.getCourseForDirection(true);
            }
        });
    };
    StartComponent.prototype.searchNearCourse = function (minPlus) {
        var _this = this;
        if (minPlus === void 0) { minPlus = 110; }
        var date = new Date();
        date.setSeconds(date.getSeconds() + this.nearStop.data.duration.value);
        this.nearCourses = this.startCourses.Where(function (x) { return _this.isNear(x, date, minPlus); }).ToList();
        if (this.nearCourses)
            var course = this.nearCourses.FirstOrDefault();
        if (minPlus > 120)
            return;
        if (course == undefined || course == null) {
            this.searchNearCourse(minPlus + 10);
        }
        if (course) {
            this.searchEnd = true;
            this.displayCourses = this.nearCourses.ToArray();
            this.initMap(course);
        }
    };
    StartComponent.prototype.initMap = function (course) {
        this.nearCourse = course;
        if (this.directionsDisplay != undefined)
            this.directionsDisplay.setMap(null);
        this.directionsDisplay = new google.maps.DirectionsRenderer();
        var origin = new google.maps.LatLng(this.appState.yourCord.lat, this.appState.yourCord.lng);
        var nearStopLatLng = this.locationService.getLatLngForStop(this.nearCourse.firstStop);
        this.map.center = nearStopLatLng;
        this.bounds = new google.maps.LatLngBounds();
        this.bounds.extend(origin);
        this.bounds.extend(nearStopLatLng);
        this.map.fitBounds(this.bounds);
        this.directionsDisplay.setDirections(this.nearStop.response);
        this.directionsDisplay.setMap(this.map);
        // this.addMarkersForCourse(this.map)
        // this.addBusMarker(this.map);
    };
    StartComponent.prototype.addMarkersForCourse = function (map) {
        var _this = this;
        var image = {
            url: 'https://maps.google.com/mapfiles/kml/pal4/icon54.png',
            labelOrigin: new google.maps.Point(10, -3)
            // This marker is 20 pixels wide by 32 pixels high.
        };
        this.nearCourse.stops.forEach(function (stop) {
            var infowindow = new google.maps.InfoWindow({
                content: "<div style='color:black'>" + stop.city + ' ' + stop.timeString + "</div>",
            });
            var marker = new google.maps.Marker({
                position: _this.locationService.getLatLngForStop(stop),
                map: map,
                icon: image,
                title: stop.city
            });
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        });
    };
    StartComponent.prototype.isNear = function (x, date, minPlus) {
        for (var i = 0; i < x.stops.length; i++) {
            if (x.stops[i].city == this.nearStop.city) {
                x.firstStop = x.stops[i];
                break;
            }
        }
        var dateTo = new Date(date);
        dateTo.setMinutes(date.getMinutes() + minPlus);
        var dateFrom = new Date(date);
        dateFrom.setMinutes(date.getMinutes() - 10);
        var coursDate = new Date();
        coursDate.setHours(x.firstStop.time.hours, x.firstStop.time.minutes);
        if (coursDate > dateFrom && coursDate < dateTo) {
            return true;
        }
        return false;
    };
    StartComponent.prototype.getCourseForDirection = function (sendEvent) {
        var _this = this;
        console.log("tak");
        var that = this;
        this.startCourses = this.allCourses.Where(function (x) { return x.direction.startsWith(_this.direction); })
            .OrderBy(function (x) {
            var now = new Date();
            now.setHours(x.firstStop.time.hours);
            now.setMinutes(x.firstStop.time.minutes);
            return now;
        })
            .ToList();
        setTimeout(function () {
            if (that.nearCourse) {
                that.searchCourse();
            }
            if (sendEvent)
                that.eventServ.sendEvent(_events_CoursesFiltered__WEBPACK_IMPORTED_MODULE_5__["CoursesFiltered"]);
        }, 100);
    };
    StartComponent.prototype.changeDirection = function () {
        var _this = this;
        if (this.direction == "Krk") {
            this.direction = "Lim";
        }
        else {
            this.direction = "Krk";
        }
        this.zone.run(function () { _this.getCourseForDirection(true); });
    };
    StartComponent.prototype.changeLocation = function () {
        var nextLocation = this.locationService.getNextLocation(this.location);
        this.locationService.currentLocation = nextLocation;
        this.eventServ.sendEvent(_events_LocationChanged__WEBPACK_IMPORTED_MODULE_10__["LocationChanged"], new _events_LocationChanged__WEBPACK_IMPORTED_MODULE_10__["LocationChanged"](nextLocation));
    };
    StartComponent.prototype.getDirection = function () {
        if (this.direction == "Krk")
            return "LIM";
        else
            return "KRK";
    };
    StartComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.interval = secondsCounter.subscribe(function (n) {
            _this.locationService.startWatchPosition();
            //  if(this.watchCourse == undefined && this.nearCourse != undefined)
            //    this.initMap(this.nearCourse);
        });
        console.log("start");
        this.getCourseForDirection(false);
        this.appVersion = this.notService.getAppVersion();
        this.message = this.notService.getMessage();
        // this.hideNotification = !this.message.unread;
        var mapDiv = document.getElementById('mapStart');
        mapDiv.addEventListener('touchstart', function (e) {
            e.stopPropagation();
        }, false);
        mapDiv.addEventListener('touchmove', function (e) {
            e.stopPropagation();
        }, false);
        mapDiv.addEventListener('touchend', function (e) {
            e.stopPropagation();
        }, false);
        var origin = new google.maps.LatLng(this.appState.yourCord.lat, this.appState.yourCord.lng);
        this.map = new google.maps.Map(document.getElementById('mapStart'), {
            zoom: 11,
            center: origin,
            zoomControl: false,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            rotateControl: false,
            fullscreenControl: false
        });
        this.yourMarker = new google.maps.Marker({
            position: origin,
            map: this.map
        });
    };
    StartComponent.prototype.ngOnDestroy = function () {
        this.interval.unsubscribe();
        clearInterval(this.interval);
        this.subscription.unsubscribe();
        if (this.interval) {
            this.interval.unsubscribe();
        }
    };
    StartComponent.prototype.notificationClick = function () {
        if (this.hideNotification == false) {
            if (this.message.unread == true) {
                this.message.unread = false;
                this.notService.saveMessage(this.message);
            }
            this.hideNotification = true;
        }
        else
            this.hideNotification = false;
    };
    StartComponent.prototype.onMapShowed = function (course) {
        this.bottomSheet.open(_components_mapSheet_component__WEBPACK_IMPORTED_MODULE_8__["MapSheet"], { data: course });
    };
    StartComponent.prototype.go = function () {
        if (this.checkDate()) {
            this.snackBar.open("Bus jeszcze nie wyjechał!", "", {
                duration: 2000,
            });
            return;
        }
        if (this.nearStop.data.distance.value > 2000) {
            this.snackBar.open("Jesteś za daleko!", "", {
                duration: 2000,
            });
            return;
        }
        this.appState.watchCourse = this.nearCourse;
        this.watchCourse = this.nearCourse;
    };
    StartComponent.prototype.onWatchEnd = function (course) {
        this.appState.watchCourse = undefined;
        this.watchCourse = undefined;
        this.nearCourse = undefined;
        this.nearStop = undefined;
        this.searchEnd = false;
        this.appState.saveWatchCourse();
    };
    StartComponent.prototype.checkDate = function () {
        var now = new Date();
        var coursDate = new Date();
        coursDate.setHours(this.nearCourse.stops[0].time.hours);
        coursDate.setMinutes(this.nearCourse.stops[0].time.minutes);
        if (now < coursDate)
            return false;
        return true;
    };
    StartComponent.prototype.resolveDirection = function () {
        switch (this.nearCourse.direction) {
            case "Krk-Że-Lim":
                return "Kraków - Zegocina - Limanowa";
            case "Krk-Ry-Lim":
                return "Kraków - Stare rybie - Limanowa";
            case "Krk-Sz-Lim":
                return "Kraków - Szyk - Limanowa";
            case "Lim-Sz-Krk":
                return "Limanowa - Szyk - Kraków";
            case "Lim-Że-Krk":
                return "Limanowa - Zegocina - Kraków";
            case "Lim-Ry-Krk":
                return "Limanowa - Stare rybie - Kraków";
            case "Lim-Ty-Krk":
                return "Limanowa - Tymbark - Kraków";
            case "Krk-Ty-Lim":
                return "Kraków - Tymbark - Limanowa";
            default:
                break;
        }
    };
    StartComponent.prototype.addBusMarker = function (map) {
        this.busLocation.getLocation({ direction: this.nearCourse.direction, time: this.nearCourse.stops[0].timeString }).subscribe(function (data) {
            if (data.time != undefined) {
                var image = {
                    url: 'http://maps.google.com/mapfiles/kml/shapes/bus.png',
                    labelOrigin: new google.maps.Point(10, -3)
                    // This marker is 20 pixels wide by 32 pixels high.
                };
                var lat = Number.parseFloat(data.time[0].Lat);
                var lng = Number.parseFloat(data.time[0].Lng);
                var stamp = new Date(data.time[0].Stamp);
                console.log(stamp);
                console.log(data.time[0].stamp);
                var latlng = new google.maps.LatLng(lat, lng);
                var infowindow = new google.maps.InfoWindow({
                    content: "<div style='color:black'>O godzinie: " + stamp.toLocaleTimeString() + " był tu</div>",
                });
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    icon: image
                });
                google.maps.event.addListener(marker, 'click', function () {
                    infowindow.open(map, marker);
                });
            }
        });
    };
    StartComponent.prototype.getPrevCourse = function () {
        console.log(this.courseSkip);
        this.courseSkip--;
        var course = this.nearCourses.Skip(this.courseSkip).FirstOrDefault();
        if (course) {
            this.nearCourse = course;
            this.initMap(course);
        }
        else {
            this.courseSkip++;
        }
    };
    StartComponent.prototype.checkNext = function () {
        if (this.nearCourses.Count() - 1 > this.courseSkip) {
            return true;
        }
        return false;
    };
    StartComponent.prototype.checkPrev = function () {
        if (this.courseSkip == 0) {
            return false;
        }
        return true;
    };
    StartComponent.prototype.showDetails = function (course) {
        this.bottomSheet.open(_single_course_single_course_component__WEBPACK_IMPORTED_MODULE_15__["SingleCourseComponent"], { data: { course: course, fullMode: true } });
    };
    StartComponent.prototype.getNextCourse = function () {
        console.log(this.nearCourses.Count());
        this.courseSkip++;
        var course = this.nearCourses.Skip(this.courseSkip).FirstOrDefault();
        if (course) {
            this.nearCourse = course;
            this.initMap(course);
        }
        else {
            this.courseSkip--;
        }
    };
    StartComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-start',
            template: __webpack_require__(/*! ./start.component.html */ "./src/app/start/start.component.html"),
            styles: [__webpack_require__(/*! ./start.component.css */ "./src/app/start/start.component.css")]
        }),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_1__["AppState"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatSnackBar"], _services_TraficService__WEBPACK_IMPORTED_MODULE_11__["TraficService"], _services_BusLocationServices__WEBPACK_IMPORTED_MODULE_13__["BusLocationServices"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"], _angular_material__WEBPACK_IMPORTED_MODULE_7__["MatBottomSheet"], _services_NotificationService__WEBPACK_IMPORTED_MODULE_6__["NotificationService"], _services_EventServices__WEBPACK_IMPORTED_MODULE_9__["EventService"], _services_LocationService__WEBPACK_IMPORTED_MODULE_4__["LocationService"]])
    ], StartComponent);
    return StartComponent;
}());



/***/ }),

/***/ "./src/app/timetable/components/stops-sheets.html":
/*!********************************************************!*\
  !*** ./src/app/timetable/components/stops-sheets.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-nav-list>\r\n        <mat-grid-list cols=\"3\" rowHeight=\"15:3\">\r\n                <mat-grid-tile>{{course.direction}}</mat-grid-tile>\r\n                <mat-grid-tile>{{course.firstStop.timeString}}</mat-grid-tile>\r\n                <mat-grid-tile>{{course.stops[course.stops.length-1].timeString}}</mat-grid-tile>\r\n        </mat-grid-list>\r\n        <br>\r\n        <mat-grid-list cols=\"2\" rowHeight=\"20:3\">\r\n                <mat-grid-tile style=\"background-color:#5255e0\">Przystanek</mat-grid-tile>\r\n                <mat-grid-tile style=\"background-color:#5255e0\">Czas</mat-grid-tile>\r\n                <div *ngFor=\"let stop of course.stops\">\r\n                  <mat-grid-tile>{{stop.city}}</mat-grid-tile>\r\n                  <mat-grid-tile>{{stop.timeString}}</mat-grid-tile>\r\n                </div>\r\n        </mat-grid-list>\r\n        <div class=\"legend\" *ngFor=\"let legend of legends\">\r\n            <div>{{legend}} - {{symbolLegend[legend]}}</div>\r\n        </div>\r\n</mat-nav-list>"

/***/ }),

/***/ "./src/app/timetable/components/stopsSheets.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/timetable/components/stopsSheets.component.ts ***!
  \***************************************************************/
/*! exports provided: StopsSheets */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StopsSheets", function() { return StopsSheets; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var StopsSheets = /** @class */ (function () {
    function StopsSheets(bottomSheetRef, data) {
        this.bottomSheetRef = bottomSheetRef;
        this.data = data;
        this.symbolLegend = {
            "F": "kursuje w dni robocze",
            "7": "kursuje w niedzielę",
            "S": "nie kursuje w dni wolne od nauki szkolnej",
            "P": "kursuje tylko w piątek",
            "6": "kursuje w soboty"
        };
        this.course = data;
        this.legends = this.course.legends.split(" ");
    }
    StopsSheets.prototype.openLink = function (event) {
        this.bottomSheetRef.dismiss();
        event.preventDefault();
    };
    StopsSheets = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'stops-sheets',
            template: __webpack_require__(/*! ./stops-sheets.html */ "./src/app/timetable/components/stops-sheets.html"),
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_BOTTOM_SHEET_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatBottomSheetRef"], Object])
    ], StopsSheets);
    return StopsSheets;
}());



/***/ }),

/***/ "./src/app/timetable/timetable.component.css":
/*!***************************************************!*\
  !*** ./src/app/timetable/timetable.component.css ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host /deep/ .mat-tab-label{\r\n    width: 50%!important;\r\n    height: 30px!important;\r\n    font-family: \"Kalam\"!important;\r\n    color: #7b1fa2!important;\r\n}\r\n\r\n.gridHeader{\r\n    background-color:#5255e0;\r\n}\r\n\r\n:host /deep/ .mat-expansion-indicator{\r\ndisplay: none!important;\r\n}\r\n\r\n.timetable-course{\r\n    width: 100%;\r\n    padding-top: 6px!important;\r\n    padding-bottom: 6px;\r\n    box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);\r\n    background-color:#424242;\r\n    color: #eee;\r\n}\r\n\r\n.odd{\r\n    background-color: #5e525f!important;\r\n}\r\n\r\n.filter-bar{\r\n    position: fixed;\r\n    height: 50px;\r\n    padding-top: 4px;\r\n    padding-bottom: 5px;\r\n    color: white;\r\n    bottom: 0px;\r\n    right: 0px;\r\n    z-index: 1000;\r\n    width: 100%;\r\n    background-color: #5255e0;\r\n    transition-duration: 0.3s;\r\n    font-size: 12px!important\r\n}\r\n\r\n.filter-bar-hidden{\r\n    bottom: 2px;\r\n    right: 4px;\r\n    width: 50px;\r\n    height: 40px;\r\n    border-radius: 90%;\r\n}\r\n\r\n.filter-options{\r\n    margin-right:13px;\r\n    font-size: 20px;\r\n    padding-bottom: 10px;\r\n    float:right;\r\n    margin-top: 4px;\r\n}\r\n\r\n:host /deep/ .mat-figure{\r\n    flex-direction: column;\r\n}"

/***/ }),

/***/ "./src/app/timetable/timetable.component.html":
/*!****************************************************!*\
  !*** ./src/app/timetable/timetable.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar style=\"height:50px\" color=\"primary\">\r\n  <mat-form-field style=\"width: 120px;\r\n        font-size: 14px;\">\r\n    <mat-select placeholder=\"Kierunek\">\r\n      <mat-option (click) = \"getCoursesForDirection(dir.value)\" *ngFor=\"let dir of directions\" [value]=\"dir.value\">\r\n        {{dir.viewValue}}\r\n      </mat-option>\r\n    </mat-select>\r\n  </mat-form-field>\r\n<div style=\"margin-left:20px;\"></div>\r\n  <mat-form-field style=\"width: 120px;\r\n        font-size: 14px;\">\r\n    <mat-select placeholder=\"Przez\">\r\n      <mat-option (click)=\"filterCourses(stop.value)\" *ngFor=\"let stop of stopsView\" [value]=\"stop.value\">\r\n        {{stop.viewValue}}\r\n      </mat-option>\r\n    </mat-select>\r\n  </mat-form-field>\r\n</mat-toolbar>\r\n\r\n<div *ngFor=\"let course of timetableView\">\r\n  <mat-card (click)=\"showDetails(course)\" style=\"padding: 5px;margin:3px\">\r\n    <mat-grid-list cols=\"3\" [rowHeight]=\"breakpoint\" (window:resize)=\"onResize($event)\">\r\n\r\n      <mat-grid-tile style=\"flex-direction:column-reverse\">\r\n        {{course.direction}}\r\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Kierunek</p>\r\n      </mat-grid-tile>\r\n      <mat-grid-tile style=\"flex-direction:column\">\r\n        {{course.firstStop.timeString}}\r\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Odjazd</p>\r\n      </mat-grid-tile>\r\n      <mat-grid-tile style=\"flex-direction:column;color:#e57373\">\r\n        {{course.legends}}\r\n        <p style=\"margin:2px;font-size: 12px;color: grey\">Legenda</p>\r\n      </mat-grid-tile>\r\n    </mat-grid-list>\r\n  </mat-card>\r\n</div>\r\n<!-- <div>\r\n  <mat-tab-group (selectedTabChange)=\"onTabClick($event)\" style=\"padding-bottom: 40px\">\r\n    <mat-tab label=\"Do Krakowa\" style=\"margin-bottom: 10px;\">\r\n      <div (click)=\"showStops(course)\" class=\"timetable-course\" *ngFor=\"let course of limCourses;let isOdd=odd\" [class.odd]=\"isOdd\" style=\"margin-bottom: 10px\">\r\n        <mat-grid-list cols=\"3\" rowHeight=\"20:3\">\r\n          <mat-grid-tile>{{course.direction}}</mat-grid-tile>\r\n          <mat-grid-tile>{{course.firstStop.timeString}}</mat-grid-tile>\r\n          <mat-grid-tile>{{course.legends}}</mat-grid-tile>\r\n        </mat-grid-list>\r\n      </div>\r\n    </mat-tab>\r\n    <mat-tab label=\"Do Limanowej\">\r\n        <div (click)=\"showStops(courseKrk)\" class=\"timetable-course\" *ngFor=\"let courseKrk of krkCourses;let isOddKrk=odd\" [class.odd]=\"isOddKrk\" style=\"margin-bottom: 10px\">\r\n            <mat-grid-list cols=\"3\" rowHeight=\"20:3\">\r\n              <mat-grid-tile>{{courseKrk.direction}}</mat-grid-tile>\r\n              <mat-grid-tile>{{courseKrk.firstStop.timeString}}</mat-grid-tile>\r\n              <mat-grid-tile>{{courseKrk.legends}}</mat-grid-tile>\r\n            </mat-grid-list>\r\n          </div>\r\n    </mat-tab>\r\n  </mat-tab-group>\r\n  <div [ngClass]=\"{'filter-bar-hidden' : hideFilterBar}\" class=\"filter-bar\">\r\n    <div *ngIf=\"!hideFilterBar\">\r\n      <mat-grid-list cols=\"5\" rowHeight=\"8:3\">\r\n        <mat-grid-tile>\r\n          <mat-checkbox [(ngModel)]=\"zegocinaCourse\" (change)=\"filterCourses()\" color='primary'></mat-checkbox>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile>\r\n          <mat-checkbox [(ngModel)]=\"szykCourse\" (change)=\"filterCourses()\" color='primary'></mat-checkbox>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile>\r\n          <mat-checkbox [(ngModel)]=\"rybieCourse\" (change)=\"filterCourses()\" color='primary'></mat-checkbox>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile>\r\n          <mat-checkbox [(ngModel)]=\"tymbarkCourse\" (change)=\"filterCourses()\" color='primary'></mat-checkbox>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile (click)=\"filterBarClick()\" style=\"margin-top: 7px!important\">\r\n          <i class=\"material-icons\">\r\n            arrow_forward\r\n          </i>\r\n        </mat-grid-tile>\r\n        <mat-grid-tile>Żegocina</mat-grid-tile>\r\n        <mat-grid-tile>Szyk</mat-grid-tile>\r\n        <mat-grid-tile>Rybie</mat-grid-tile>\r\n        <mat-grid-tile>Tymbark</mat-grid-tile>\r\n      </mat-grid-list>\r\n    </div>\r\n    <div (click)=\"filterBarClick()\" class=\"filter-options\" *ngIf=\"hideFilterBar\">\r\n      <i class=\"material-icons\">\r\n        filter_list\r\n      </i>\r\n    </div>\r\n  </div>\r\n</div> -->"

/***/ }),

/***/ "./src/app/timetable/timetable.component.ts":
/*!**************************************************!*\
  !*** ./src/app/timetable/timetable.component.ts ***!
  \**************************************************/
/*! exports provided: TimetableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimetableComponent", function() { return TimetableComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_AppState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/AppState */ "./src/app/services/AppState.ts");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _components_stopsSheets_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/stopsSheets.component */ "./src/app/timetable/components/stopsSheets.component.ts");
/* harmony import */ var _single_course_single_course_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../single-course/single-course.component */ "./src/app/single-course/single-course.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var TimetableComponent = /** @class */ (function () {
    function TimetableComponent(appState, bottomSheet) {
        this.appState = appState;
        this.bottomSheet = bottomSheet;
        this.directions = [{ value: 'Lim', viewValue: 'Do Krakowa' },
            { value: 'Krk', viewValue: 'Do Limanowej' }];
        this.stopsView = [{ value: 'Że', viewValue: 'Żegocina' },
            { value: 'Sz', viewValue: 'Szyka' },
            { value: 'Ty', viewValue: 'Tymbark' },
            { value: 'Ry', viewValue: 'Rybie' },
            { value: 'All', viewValue: 'Wszystkie' },];
        this.hideFilterBar = true;
        this.zegocinaCourse = true;
        this.szykCourse = true;
        this.rybieCourse = true;
        this.tymbarkCourse = true;
        this.activeStop = null;
        this.breakpoint = "3:1";
    }
    TimetableComponent.prototype.ngOnInit = function () {
        this.timetable = this.appState.timetable;
        this.getCoursesForDirection("Lim");
        this.breakpoint = (window.innerWidth <= 450) ? "3:1" : "6:1";
    };
    TimetableComponent.prototype.onResize = function (event) {
        this.breakpoint = (event.target.innerWidth <= 450) ? "3:1" : "6:1";
    };
    TimetableComponent.prototype.getCoursesForDirection = function (direction) {
        this.directionCoursesList = this.timetable.Where(function (x) { return x.direction.startsWith(direction); }).OrderBy(function (x) { return x.firstStop.timeString; });
        this.timetableView = this.directionCoursesList.ToArray();
        if (this.activeStop != null)
            this.filterCourses(this.activeStop);
    };
    TimetableComponent.prototype.showStops = function (course) {
        this.bottomSheet.open(_components_stopsSheets_component__WEBPACK_IMPORTED_MODULE_3__["StopsSheets"], { data: course });
    };
    TimetableComponent.prototype.filterBarClick = function () {
        if (this.hideFilterBar == true) {
            this.hideFilterBar = false;
        }
        else {
            this.hideFilterBar = true;
        }
    };
    TimetableComponent.prototype.showDetails = function (course) {
        this.bottomSheet.open(_single_course_single_course_component__WEBPACK_IMPORTED_MODULE_4__["SingleCourseComponent"], { data: { course: course, fullMode: false } });
    };
    TimetableComponent.prototype.filterCourses = function (stops) {
        this.activeStop = stops;
        this.timetableView = this.directionCoursesList.Where(function (x) { return x.direction.includes(stops) || stops == "All"; }).ToArray();
    };
    TimetableComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-timetable',
            template: __webpack_require__(/*! ./timetable.component.html */ "./src/app/timetable/timetable.component.html"),
            styles: [__webpack_require__(/*! ./timetable.component.css */ "./src/app/timetable/timetable.component.css")]
        }),
        __metadata("design:paramtypes", [_services_AppState__WEBPACK_IMPORTED_MODULE_1__["AppState"], _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatBottomSheet"]])
    ], TimetableComponent);
    return TimetableComponent;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: false
};
/*
 * In development mode, to ignore zone related error stack frames such as
 * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can
 * import the following file, but please comment it out in production mode
 * because it will have performance impact when throw error
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");




if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_2__["AppModule"])
    .catch(function (err) { return console.log(err); });


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! D:\Kuba Projekty\MaksBus\MaxBusProject\src\main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map